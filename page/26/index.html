<!DOCTYPE html>
<html lang=en>
<head>
    <meta charset="utf-8">
    
    <title>Soopdop&#39;s note</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta property="og:type" content="website">
<meta property="og:title" content="Soopdop&#39;s note">
<meta property="og:url" content="http://soopdop.github.io/page/26/index.html">
<meta property="og:site_name" content="Soopdop&#39;s note">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Soopdop&#39;s note">
    

    

    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.1.3/jquery.min.js"></script>
    
    
    
    
        <script type="text/javascript">
(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-80990910-1', 'auto');
ga('send', 'pageview');

</script>
    
    
    


</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                
                <span class="site-title">Soopdop&#39;s note</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/about">About</a>
                
                    <a class="main-nav-link" href="/archives">Archives</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="/css/images/cloudy.png" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/about">About</a></td>
                
                    <td><a class="main-nav-link" href="/archives">Archives</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="/css/images/cloudy.png" />
            <h2 id="name">Soopdop</h2>
            <h3 id="title">Software Engineer</h3>
            <span id="location"><i class="fa fa-map-marker"></i>Seoul, Korea</span>
            <a id="follow" target="_blank" href="https://www.linkedin.com/in/soondong-park">FOLLOW</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                326
                <span>posts</span>
            </div>
            <div class="article-info-block">
                15
                <span>tags</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="https://github.com/soopdop" target="_blank" title="github" class=tooltip>
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="https://www.linkedin.com/in/soondong-park" target="_blank" title="linkedin" class=tooltip>
                            <i class="fa fa-linkedin"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main">
    <article id="blog-TIP-How-to-see-log-in-jsfiddle" class="article article-type-blog" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/07/03/TIP-How-to-see-log-in-jsfiddle/">[TIP] How to see console log in the JsFiddle : Firebug</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/07/03/TIP-How-to-see-log-in-jsfiddle/">
            <time datetime="2017-07-03T06:07:10.000Z" itemprop="datePublished">2017-07-03</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/programming/">programming</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/javascript-jsfiddle/">javascript, jsfiddle</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <img src="/2017/07/03/TIP-How-to-see-log-in-jsfiddle/Firebug_logo.png" title="Firebug logo">
<h2 id="How-to-see-logs-in-the-output-window"><a href="#How-to-see-logs-in-the-output-window" class="headerlink" title="How to see logs in the output window"></a>How to see logs in the output window</h2><ol>
<li>Click “External Resources” in the left side bar.</li>
<li>Add this link there.<br><a href="https://getfirebug.com/firebug-lite-debug.js" target="_blank" rel="noopener">https://getfirebug.com/firebug-lite-debug.js</a></li>
<li>Run code. Then the button with a bug will be shown in the output window.</li>
</ol>
<h2 id="What-is-the-Firebug"><a href="#What-is-the-Firebug" class="headerlink" title="What is the Firebug"></a>What is the Firebug</h2><p>This is a debugging tool for Firefox environment, but I think it’s not commonly used these days. This is because <strong>chrome developer tool</strong> is even better. However, Firebug is still being developed. (<a href="http://getfirebug.com/" target="_blank" rel="noopener">http://getfirebug.com/</a>)</p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://soopdop.github.io/2017/07/03/TIP-How-to-see-log-in-jsfiddle/" data-id="cjt3zcbp400x72sn2eg28c5hm" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="http://soopdop.github.io/2017/07/03/TIP-How-to-see-log-in-jsfiddle/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="http://soopdop.github.io/2017/07/03/TIP-How-to-see-log-in-jsfiddle/">Comments</a>
    

        </footer>
    </div>
    
</article>



    <article id="blog-Book-Deep-Javascript-9-9" class="article article-type-blog" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/06/29/Book-Deep-Javascript-9-9/">[Book Summary] 속깊은 Javascript 9/9</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/06/29/Book-Deep-Javascript-9-9/">
            <time datetime="2017-06-29T09:35:38.000Z" itemprop="datePublished">2017-06-29</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/programming/">programming</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/javascript-Book-Summary/">javascript, Book Summary</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <img src="/2017/06/29/Book-Deep-Javascript-9-9/cover.jpg"> 
<h1 id="Chapter-9-자바스크립트-표준"><a href="#Chapter-9-자바스크립트-표준" class="headerlink" title="Chapter 9. 자바스크립트 표준"></a>Chapter 9. 자바스크립트 표준</h1><h2 id="9-1-ECMAScript-6-표준"><a href="#9-1-ECMAScript-6-표준" class="headerlink" title="9.1. ECMAScript 6 표준"></a>9.1. ECMAScript 6 표준</h2><p>2015년 6월에 발표된 ECMAScript 6(ES6)은 ECMAScript 2015라고도 불린다. ES6과 ES 2015가 같기 때문에 조금 헷갈린다. 기존의 표준에 추가적인 기능들과 조금 더 나은 프로그래밍 언어의 모습을 얹어 놓았다. 개인적으로는 vue.js 2를 이용해서 개발할때 필요하므로 자세히 정리한다.</p>
<h3 id="9-1-1-변수-상수-선언-키워드-let-const"><a href="#9-1-1-변수-상수-선언-키워드-let-const" class="headerlink" title="9.1.1. 변수, 상수 선언 키워드(let, const)"></a>9.1.1. 변수, 상수 선언 키워드(let, const)</h3><h4 id="“const는-이전에-없었던-‘상수’를-선언하는-기능이다-”"><a href="#“const는-이전에-없었던-‘상수’를-선언하는-기능이다-”" class="headerlink" title="“const는 이전에 없었던 ‘상수’를 선언하는 기능이다.”"></a>“const는 이전에 없었던 ‘상수’를 선언하는 기능이다.”</h4><p>같은 변수를 const로 선언 후 다시 정의 하면 에러가 발생한다. </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="number">1</span>;</span><br><span class="line">a = <span class="number">2</span>; <span class="comment">// 에러! 상수 변경 불가.</span></span><br></pre></td></tr></table></figure>
<h4 id="“let은-“변수”를-선언하는데-var와는-조금-다르다-”"><a href="#“let은-“변수”를-선언하는데-var와는-조금-다르다-”" class="headerlink" title="“let은 “변수”를 선언하는데 var와는 조금 다르다.”"></a>“let은 “변수”를 선언하는데 var와는 조금 다르다.”</h4><p>var 와 다른 점은 다음 두가지이다.</p>
<ol>
<li>중복 선언이 불가능하다.</li>
<li>다른 언어 처럼 중괄호를 이용한 블록 개념을 가지고 있다.</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="number">1</span>;</span><br><span class="line">a = <span class="number">2</span>; <span class="comment">// 에러! 상수 변경 불가.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">2</span>; <span class="comment">//에러! 중복 선언 불가.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;&#125;</span><br><span class="line"><span class="built_in">console</span>.log(i) <span class="comment">// 에러! i는 이미 사라짐.</span></span><br></pre></td></tr></table></figure>
<h3 id="9-1-2-함수-화살표-표현식"><a href="#9-1-2-함수-화살표-표현식" class="headerlink" title="9.1.2. 함수 화살표 표현식"></a>9.1.2. 함수 화살표 표현식</h3><p>ES6에서는 익명 함수를 표현할 때 간단히 표현할 수 있는 화살표 표현식이 추가되었다.</p>
<h4 id="“화살표-표현식이-생겼다-”"><a href="#“화살표-표현식이-생겼다-”" class="headerlink" title="“화살표 표현식이 생겼다.”"></a>“화살표 표현식이 생겼다.”</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> func;</span><br><span class="line">func = <span class="function"><span class="keyword">function</span> (<span class="params">msg</span>) </span>&#123;alert(msg);&#125;</span><br><span class="line">func = <span class="function">(<span class="params">msg</span>) =&gt;</span> alert(msg);  <span class="comment">// 이 둘은 동일하다.</span></span><br></pre></td></tr></table></figure>
<h4 id="“콜백-함수에서의-this가-달라졌다-”"><a href="#“콜백-함수에서의-this가-달라졌다-”" class="headerlink" title="“콜백 함수에서의 this가 달라졌다.”"></a>“콜백 함수에서의 this가 달라졌다.”</h4><p>기존의 익명함수는 <code>setTimeout</code>에 넘긴 익명함수의 컨텍스트가 global이었으나, 화살표 표현식을 통한 컨텍스트는 기존에 호출한 것이 유지되도록 바뀌었다. 이제 더이상 <code>_this</code>를 저장하지 않아도 될것 같다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">"global"</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.a = <span class="string">"local"</span>;</span><br><span class="line">  <span class="comment">// 기존의 this </span></span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"1. a is "</span> + <span class="keyword">this</span>.a); <span class="comment">// 1. a is global</span></span><br><span class="line">  &#125;, <span class="number">100</span>);</span><br><span class="line">  <span class="comment">// this를 저장해서 사용하기</span></span><br><span class="line">  <span class="keyword">var</span> _this = <span class="keyword">this</span>;</span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"2. a is "</span> + _this.a); <span class="comment">// 1. a is local</span></span><br><span class="line">  &#125;, <span class="number">100</span>);</span><br><span class="line">  <span class="comment">// 새로운 화살표 표현식 내에서의 this</span></span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">"3. a is "</span> + <span class="keyword">this</span>.a), <span class="number">100</span>); <span class="comment">// 1. a is local</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person();</span><br></pre></td></tr></table></figure></p>
<h4 id="“IIFE-Invoke-Immediate-Function-Express-도-간단해졌다-”"><a href="#“IIFE-Invoke-Immediate-Function-Express-도-간단해졌다-”" class="headerlink" title="“IIFE(Invoke Immediate Function Express)도 간단해졌다.”"></a>“IIFE(Invoke Immediate Function Express)도 간단해졌다.”</h4><p>괄호로 전체를 묶는 방법은 좀 달라졌으니, 주의 요망<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 기존 방법</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    alert(<span class="string">"msg"</span>);</span><br><span class="line">&#125;());</span><br><span class="line"><span class="comment">// 새로운 방법</span></span><br><span class="line">(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    alert(<span class="string">"msg"</span>);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure></p>
<h3 id="9-1-3-클래스-class-키워드"><a href="#9-1-3-클래스-class-키워드" class="headerlink" title="9.1.3. 클래스(class) 키워드"></a>9.1.3. 클래스(class) 키워드</h3><p>새로 추가된 <code>class</code>는 진짜 class이다. <code>constructor()</code>에 생성자를 구현하고, <code>extends</code> 키워드로 서브클래스를 구현할 수 있으며, <code>super</code> 키워드를 이용할 수도 있다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.type = <span class="string">"Car"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  getName() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SUV</span> <span class="keyword">extends</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name) &#123; <span class="comment">// 생성자 함수</span></span><br><span class="line">    <span class="keyword">super</span>(name); <span class="comment">// super 키워드 이용</span></span><br><span class="line">    <span class="keyword">this</span>.type = <span class="string">"SUV"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  getName() &#123; <span class="comment">// 함수 오버라이딩</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.getName() + <span class="string">" is "</span> + <span class="keyword">this</span>.type; <span class="comment">// super키워드 이용</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> suv = <span class="keyword">new</span> SUV(<span class="string">"My car"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(suv.getName()); <span class="comment">// My car is SUV</span></span><br></pre></td></tr></table></figure></p>
<h3 id="9-1-4-객체-표현식-기능-확대"><a href="#9-1-4-객체-표현식-기능-확대" class="headerlink" title="9.1.4. 객체 표현식 기능 확대"></a>9.1.4. 객체 표현식 기능 확대</h3><p>좀 더 향상된 방법의 객체 표현식이 만들어졌다.</p>
<h4 id="“속성명과-변수명이-같을-때는-한번만-써도-된다-”"><a href="#“속성명과-변수명이-같을-때는-한번만-써도-된다-”" class="headerlink" title="“속성명과 변수명이 같을 때는 한번만 써도 된다.”"></a>“속성명과 변수명이 같을 때는 한번만 써도 된다.”</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>,</span><br><span class="line">  b = <span class="number">2</span>,</span><br><span class="line">  c = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 기존의 방법</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  a: a,</span><br><span class="line">  b: b,</span><br><span class="line">  c: c</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 새로운 방법</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  a,</span><br><span class="line">  b,</span><br><span class="line">  c</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(obj); <span class="comment">// Object &#123;a=1, b=2, c=3&#125;</span></span><br></pre></td></tr></table></figure>
<h4 id="“객체-표현식에-계산식이-들어갈-수-도-있다-”"><a href="#“객체-표현식에-계산식이-들어갈-수-도-있다-”" class="headerlink" title="“객체 표현식에 계산식이 들어갈 수 도 있다.”"></a>“객체 표현식에 계산식이 들어갈 수 도 있다.”</h4><p>계산식을 이용해서 객체를 선언하고 싶을 때, 기존에는 빈 객체 선언 후 코드로 추가 해야 했지만 그 부분이 개선되었다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 기존의 방법</span></span><br><span class="line"><span class="keyword">var</span> foo = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> bar = &#123;&#125;;</span><br><span class="line">bar[<span class="string">"bar"</span> + ++foo] = foo;</span><br><span class="line">bar[<span class="string">"bar"</span> + ++foo] = foo;</span><br><span class="line">bar[<span class="string">"bar"</span> + ++foo] = foo;</span><br><span class="line"><span class="built_in">console</span>.log(bar); <span class="comment">// Object &#123;bar2=2, bar3=3, bar4=4&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 새로운 방법</span></span><br><span class="line"><span class="keyword">let</span> newBar = &#123;</span><br><span class="line">  [<span class="string">"bar"</span> + ++foo]: foo, [<span class="string">"bar"</span> + ++foo]: foo, [<span class="string">"bar"</span> + ++foo]: foo</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(newBar); <span class="comment">// Object &#123;bar2=2, bar3=3, bar4=4&#125;</span></span><br></pre></td></tr></table></figure></p>
<h4 id="“function-키워드를-생략할-수-있고-getter-setter-정의가-단순해졌다-”"><a href="#“function-키워드를-생략할-수-있고-getter-setter-정의가-단순해졌다-”" class="headerlink" title="“function 키워드를 생략할 수 있고, getter/setter 정의가 단순해졌다.”"></a>“function 키워드를 생략할 수 있고, getter/setter 정의가 단순해졌다.”</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// function 키워드를 써야 하는 기존의 방법</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  func: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">"msg"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// funciton 키워드를 생략할 수 있는 새로운 방법</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  func() &#123;</span><br><span class="line">    alert(<span class="string">"msg"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// getter, setter를 설정을 위한 기존의 방법</span></span><br><span class="line"><span class="comment">// obj.name에 접근하면 호출되는 함수들이다.</span></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj, <span class="string">"name"</span>, &#123;</span><br><span class="line">  get: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>._name;</span><br><span class="line">  &#125;,</span><br><span class="line">  set: <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>._name = name;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// getter, setter를 설정을 위한 새로운 방법</span></span><br><span class="line">obj = &#123;</span><br><span class="line">  _name: <span class="string">"my name"</span>,</span><br><span class="line">  get name() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>._name;</span><br><span class="line">  &#125;,</span><br><span class="line">  set name(name) &#123;</span><br><span class="line">    <span class="keyword">this</span>._name = name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="9-1-5-템플릿-문자열-표현식"><a href="#9-1-5-템플릿-문자열-표현식" class="headerlink" title="9.1.5. 템플릿 문자열 표현식"></a>9.1.5. 템플릿 문자열 표현식</h3><p>템플릿 문자열 표현식은 <code>` </code>(역따옴표)를 이용한다. 아래의 예제와 같이 더 이상 <code>+</code> 로 문자열을 연결해서 붙일 필요도 없고, 멀티라인 문자열도 지원한다.  </p>
<h4 id="문자열-템플릿-기본"><a href="#문자열-템플릿-기본" class="headerlink" title="문자열 템플릿 기본"></a>문자열 템플릿 기본</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> foo = <span class="string">"bar"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 템플릿 문자열</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;foo&#125;</span> <span class="subst">$&#123;foo.toUpperCase()&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 멀티라인 지원</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`foo</span></span><br><span class="line"><span class="string">bar`</span>);</span><br></pre></td></tr></table></figure>
<h4 id="Tagged-template"><a href="#Tagged-template" class="headerlink" title="Tagged template"></a>Tagged template</h4><p>책에서는 이 용어를 사용하지 않는다. 하지만, <a href="&quot;http://hacks.mozilla.or.kr/2015/08/es6-in-depth-template-strings-2/&quot;">이곳</a>으로 그리고 <a href="&quot;https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Template_literals#Tagged_template_literals&quot;">MDN</a>으로 부터 정식 명칭과 더 명확한 정보를 얻을 수 있었다. </p>
<p>Tagged template 이란, 템플릿 문자열 앞에 어떤 함수의 이름을 붙이는 것이다. 이렇게 함으로써, 문자열을 가공하는 방법을 제공한다. 이를 활용하여 다국어를 지원, 이스케이핑, 템플릿 언어 등에 응용할 수 있다.</p>
<p>Tag는 함수로 구현하며 다음과 같이 템플릿 문자열 앞에 붙여준다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myTag</span> (<span class="params">strings, values</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"안녕?"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> name = myTag <span class="string">`Hello?`</span>;</span><br><span class="line"><span class="built_in">console</span>.log(name); <span class="comment">// 안녕?</span></span><br></pre></td></tr></table></figure></p>
<h3 id="9-1-6-Destructing"><a href="#9-1-6-Destructing" class="headerlink" title="9.1.6. Destructing"></a>9.1.6. Destructing</h3><p>객체를 역으로 여러 개의 변수에 할당하는 것을 의미한다. 좌측값(lvalue)에 <code>[]</code>이나 <code>{}</code>가 있으면 Destructing이라고 보면 된다.</p>
<h4 id="“배열을-Destucting-한다-”"><a href="#“배열을-Destucting-한다-”" class="headerlink" title="“배열을 Destucting 한다.”"></a>“배열을 Destucting 한다.”</h4><p>배열의 값을 순서대로 변수에 할당한다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myArray = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="comment">// 각각의 변수에 myArray의 값들을 할당함. 여기서 3은 버려진다.</span></span><br><span class="line"><span class="keyword">var</span> [a, b, , c, d] = myArray;</span><br><span class="line"><span class="comment">// swap 예제. lvalue에 쓰인 []은 destructing</span></span><br><span class="line">[a, b] = [b, a];</span><br></pre></td></tr></table></figure></p>
<h4 id="“객체-Destructing-한다-”"><a href="#“객체-Destructing-한다-”" class="headerlink" title="“객체 Destructing 한다.”"></a>“객체 Destructing 한다.”</h4><p>객체의 value(키 빼고)를 각각의 변수에 할당한다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 객체의 경우, 객체의 속성명으로 변수로 만든다.</span></span><br><span class="line"><span class="keyword">var</span> foo = &#123;</span><br><span class="line">	bar : <span class="string">"I'm bar"</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> &#123;</span><br><span class="line">  bar</span><br><span class="line">&#125; = foo;</span><br><span class="line"><span class="built_in">console</span>.log(bar); <span class="comment">// I'm bar</span></span><br></pre></td></tr></table></figure></p>
<h4 id="“깊이가-있는-객체를-Destructing-한다-”"><a href="#“깊이가-있는-객체를-Destructing-한다-”" class="headerlink" title="“깊이가 있는 객체를 Destructing 한다.”"></a>“깊이가 있는 객체를 Destructing 한다.”</h4><p>깊이가 있는 객체의 경우, 객체로 받을 수도, 내부 객체를 풀어서 받을지 표현식으로 결정할 수 있다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> foo = &#123;</span><br><span class="line">  bar: &#123;</span><br><span class="line">    bar1: <span class="string">"I'm bar1"</span>,</span><br><span class="line">    bar2: <span class="string">"I'm bar2"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> &#123;</span><br><span class="line">  bar,</span><br><span class="line">  bar: &#123;</span><br><span class="line">    bar1,</span><br><span class="line">    bar2</span><br><span class="line">  &#125;</span><br><span class="line">&#125; = foo;</span><br><span class="line"><span class="built_in">console</span>.log(bar); <span class="comment">// Object &#123;bar1: "I'm bar1", bar2: "I'm bar2"&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(bar1); <span class="comment">// I'm bar1</span></span><br><span class="line"><span class="built_in">console</span>.log(bar2); <span class="comment">// I'm bar2</span></span><br></pre></td></tr></table></figure></p>
<h4 id="“Destructing-할-때-기본-값-지정이-가능하다-”"><a href="#“Destructing-할-때-기본-값-지정이-가능하다-”" class="headerlink" title="“Destructing 할 때, 기본 값 지정이 가능하다.”"></a>“Destructing 할 때, 기본 값 지정이 가능하다.”</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"><span class="keyword">var</span> [a = <span class="number">5</span>, b = <span class="number">6</span>, c = <span class="number">7</span>, d = <span class="number">8</span>] = arr;</span><br><span class="line"><span class="built_in">console</span>.log(a, b, c, d); <span class="comment">// 1 2 7 8</span></span><br></pre></td></tr></table></figure>
<h4 id="“함수의-파라미터를-받을-때-Destructing-가능하다-”"><a href="#“함수의-파라미터를-받을-때-Destructing-가능하다-”" class="headerlink" title="“함수의 파라미터를 받을 때, Destructing 가능하다.”"></a>“함수의 파라미터를 받을 때, Destructing 가능하다.”</h4><p><code>[]</code>의 의미에 대해서 조금 헷갈리는 부분이 있는데, 어떤 것이 array이고 어떤 것이 destructing인지 잘 구분해야 한다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">[foo,bar]</span>) </span>&#123; <span class="comment">// destructing </span></span><br><span class="line">	<span class="built_in">console</span>.log(foo, bar);</span><br><span class="line">  <span class="keyword">return</span> [bar,foo] <span class="comment">// array</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> [a,b]<span class="comment">/* destructing */</span> = func([<span class="string">"a"</span>,<span class="string">"b"</span>]);  <span class="comment">/* array */</span></span><br><span class="line"><span class="built_in">console</span>.log(a, b);</span><br></pre></td></tr></table></figure></p>
<h3 id="9-1-7-함수-인자-기능-확대"><a href="#9-1-7-함수-인자-기능-확대" class="headerlink" title="9.1.7. 함수 인자 기능 확대"></a>9.1.7. 함수 인자 기능 확대</h3><p>당연히 있어야할 것이 지금 나오 느낌.</p>
<h4 id="“가변인자-사용이-가능해-졌다-”"><a href="#“가변인자-사용이-가능해-졌다-”" class="headerlink" title="“가변인자 사용이 가능해 졌다.”"></a>“가변인자 사용이 가능해 졌다.”</h4><p>기존의 방법은 <code>arguments</code>에 <code>Array.prototype.slice()</code>함수를 적용해서 남은 배열을 파라미터를 가져와야 했으나 이제는 <code>...</code> 붙이면 된다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">arg1, ...rest</span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(arg1, rest);</span><br><span class="line">&#125;</span><br><span class="line">func(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>); <span class="comment">// 1 [2, 3, 4]</span></span><br></pre></td></tr></table></figure></p>
<p>반대로, 호출하는 쪽에 <code>...</code>을 붙이면 배열을 펼쳐서 각각의 파라미터로 전달하게 된다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">a, b, c, d</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a, b, c, d, );</span><br><span class="line">&#125;</span><br><span class="line">func(...[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]); <span class="comment">// 1 2 3 4</span></span><br></pre></td></tr></table></figure>
<h4 id="“함수-인자에-기본값-설정이-가능하다-”"><a href="#“함수-인자에-기본값-설정이-가능하다-”" class="headerlink" title="“함수 인자에 기본값 설정이 가능하다.”"></a>“함수 인자에 기본값 설정이 가능하다.”</h4><p>이전에는 파라미터에 대한 Falsy 체크로 <code>param1 = param1 || &quot;default&quot;</code>을 써야 했지만, 이제는 그러지 않아도 된다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">a = <span class="number">1</span>, b = <span class="number">2</span>, c = <span class="number">3</span></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a, b, c);</span><br><span class="line">&#125;</span><br><span class="line">func(<span class="number">4</span>, <span class="literal">null</span>, <span class="literal">undefined</span>);</span><br></pre></td></tr></table></figure></p>
<p>주의할 점은 <code>undefined</code>에 대해서만 기본값을 할당하며, <code>null</code>/<code>0</code>/<code>false</code>/<code>&quot;&quot;</code>을 체크하던 기존의 <code>param1 = param1 || &quot;default&quot;</code> 패턴과는 다르다는 것이다.</p>
<h3 id="9-1-8-iterator와-for-of-기능"><a href="#9-1-8-iterator와-for-of-기능" class="headerlink" title="9.1.8. iterator와 for-of 기능"></a>9.1.8. iterator와 for-of 기능</h3><p>이 부분은 쉽지 않다. 이해해야 할 것이 좀 있다. <code>TODO: 나중에 다시 정리 예정</code> </p>
<h3 id="9-1-9-Map과-Set-기능-추가"><a href="#9-1-9-Map과-Set-기능-추가" class="headerlink" title="9.1.9. Map과 Set 기능 추가"></a>9.1.9. Map과 Set 기능 추가</h3><p>자바스크립트에는 없었던 유용한 자료구조가 추가되었다. Map과 Set은 각각 필수 함수들을 내장하고 있으며, iterator가 구현되어 있다.</p>
<h4 id="“Set과-Map-클래스가-추가되었다-”"><a href="#“Set과-Map-클래스가-추가되었다-”" class="headerlink" title="“Set과 Map 클래스가 추가되었다.”"></a>“Set과 Map 클래스가 추가되었다.”</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Map</span></span><br><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>().set(<span class="string">"key1"</span>, <span class="string">"value1"</span>).set(<span class="string">"key2"</span>, <span class="string">"value2"</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, val] <span class="keyword">of</span> map.entries()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key, val);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Set</span></span><br><span class="line"><span class="keyword">var</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>().add(<span class="string">"value1"</span>).add(<span class="string">"value2"</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> val <span class="keyword">of</span> set.values()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(val);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="“WeakSet과-WeakMap”은-reference가-없어지면-요소가-삭제된다-”"><a href="#“WeakSet과-WeakMap”은-reference가-없어지면-요소가-삭제된다-”" class="headerlink" title="“WeakSet과 WeakMap”은 reference가 없어지면 요소가 삭제된다.”"></a>“WeakSet과 WeakMap”은 reference가 없어지면 요소가 삭제된다.”</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  data: <span class="string">"foo"</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> set = <span class="keyword">new</span> <span class="built_in">WeakSet</span>().add(obj);</span><br><span class="line"><span class="built_in">console</span>.log(set.has(obj)); <span class="comment">// true</span></span><br><span class="line">obj = <span class="literal">null</span>;</span><br><span class="line"><span class="built_in">console</span>.log(set.has(obj)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<h3 id="9-1-10-Binary-Octal-표현식-추가"><a href="#9-1-10-Binary-Octal-표현식-추가" class="headerlink" title="9.1.10. Binary/Octal 표현식 추가"></a>9.1.10. Binary/Octal 표현식 추가</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">0b11111111</span>); <span class="comment">// 255</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">0xFF</span>); <span class="comment">// 255</span></span><br></pre></td></tr></table></figure>
<h3 id="9-1-11-TypedArray-기능-추가"><a href="#9-1-11-TypedArray-기능-추가" class="headerlink" title="9.1.11. TypedArray 기능 추가"></a>9.1.11. TypedArray 기능 추가</h3><p>Raw 데이터를 만들고 조작할 수 있는 방법을 제공한다. 웹에서도 socket, video, sound와 같은 데이터를 다루기 시작해면서 필요해 졌다. <a href="&quot;https://developer.mozilla.org/ko/docs/Web/JavaScript/Typed_arrays&quot;">MDN</a> 문서에 친절하게도 한글로 잘 설명되어 있다. 버퍼와 뷰 부분으로 나누어져 있는데, 버퍼에 직접 접근할 수 없고, 뷰를 통해서 접근한다. <code>ArrayBuffer()</code> 는 버퍼를 위해 사용하고, <code>Unint32Array()</code>와 같은 생성자는 뷰를 생성하기 위해서 사용한다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arrayBuffer = <span class="keyword">new</span> <span class="built_in">ArrayBuffer</span>(<span class="number">5</span>); <span class="comment">// 5바이트 버퍼 생성</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="keyword">new</span> <span class="built_in">Uint32Array</span>(arrayBuffer, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">var</span> ch = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(arrayBuffer, <span class="number">4</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">num[<span class="number">0</span>] = <span class="number">0xFFFFFFFF</span>;</span><br><span class="line">ch[<span class="number">0</span>] = <span class="number">0xFF</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(num); <span class="comment">// Uint32Array [4294967295]</span></span><br><span class="line"><span class="built_in">console</span>.log(ch); <span class="comment">// Uint8Array [255]</span></span><br></pre></td></tr></table></figure></p>
<h3 id="9-1-12-모듈-기능-표준화"><a href="#9-1-12-모듈-기능-표준화" class="headerlink" title="9.1.12. 모듈 기능 표준화"></a>9.1.12. 모듈 기능 표준화</h3><p>Node.js와 CommonJS로 부터 활성화 되기 시작해서 이번 표준에 정의 되었다. <code>export</code>로 각 파일에서 모듈을 정의하고, <code>import</code>로 사용한다. export는 두 가지 종류가 있는데, <code>named export</code>와 <code>default export</code>이다. </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// module.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> bar <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//app.js</span></span><br><span class="line"><span class="keyword">import</span> mybar, &#123;foo&#125; <span class="keyword">from</span> <span class="string">"a.js"</span>;</span><br></pre></td></tr></table></figure>
<p><code>mybar</code>에는 <code>{}</code>가 필요 없고, <code>default export</code>인 로 설정한 <code>bar</code>가 불려온다. 그 외엔 모두 <code>{}</code> 안에 넣어야 한다. 나머지 정확한 규칙들은 <a href="&quot;https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Statements/import&quot;">MDN</a> 을 참고하면 된다.    </p>
<h3 id="9-1-13-프락시-모듈"><a href="#9-1-13-프락시-모듈" class="headerlink" title="9.1.13. 프락시 모듈"></a>9.1.13. 프락시 모듈</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> foo = &#123;</span><br><span class="line">  bar: <span class="number">1</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// get할 때 속성 존재 여부 체크와 에러 코드를 리턴해주는 Proxy 객체</span></span><br><span class="line"><span class="keyword">var</span> fooProxy = <span class="keyword">new</span> <span class="built_in">Proxy</span>(foo, &#123;</span><br><span class="line">  get(foo, name) &#123;</span><br><span class="line">    <span class="keyword">return</span> name <span class="keyword">in</span> foo ? foo[name] : <span class="string">"ERROR 111: 없엉."</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(fooProxy.a); <span class="comment">// ERROR 111: 없엉.</span></span><br><span class="line"><span class="built_in">console</span>.log(fooProxy.bar); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<h3 id="9-1-14-Symbol-모듈"><a href="#9-1-14-Symbol-모듈" class="headerlink" title="9.1.14. Symbol 모듈"></a>9.1.14. Symbol 모듈</h3><p>이 책은 Symbol에 대한 제대로된 정의와 필요성에 대해서 설명하고 있지 않은데다가 예제 또한 유용하지 않은 것이다. 이에 대해서는 <a href="&quot;http://hacks.mozilla.or.kr/&quot;">Hacks Mozillar</a>에 잘 나와있다. Symbol은 유일한 값을 갖는 속성 키를 만드는데 쓰인다. 만약 내가 라이브러리를 만들어서 html의 특정 엘리멘트에 나만의 속성을 추가했다고 가정한다. 그런 속성명은 다른 라이브러리와 충돌할 수 밖에 없다. 이 때 Symbol()을 사용한다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 파라미터로 들어가는 값은 주석이다. 디버깅용 출력에 사용된다.</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Symbol</span>(<span class="string">"abcd"</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 매번 생성한 심벌은 다르다.</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Symbol</span>() === <span class="built_in">Symbol</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// window에 속성으로 등록한다 해도, 변수명이나 함수명에 대한 충돌을 신경쓰지 않아도 된다.</span></span><br><span class="line"><span class="keyword">var</span> myFunc = <span class="function"><span class="params">()</span> =&gt;</span> &#123;<span class="built_in">console</span>.log(<span class="string">"myFunc"</span>)&#125;;</span><br><span class="line"><span class="keyword">var</span> myFuncSym = <span class="built_in">Symbol</span>(<span class="string">"myFunc"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 등록과 호출</span></span><br><span class="line"><span class="built_in">window</span>[myFuncSym] = myFunc;</span><br><span class="line"><span class="built_in">window</span>[myFuncSym]();</span><br></pre></td></tr></table></figure></p>
<h3 id="9-1-15-Promise-모듈"><a href="#9-1-15-Promise-모듈" class="headerlink" title="9.1.15. Promise 모듈"></a>9.1.15. Promise 모듈</h3><p>비동기 함수를 Chaining하기 위한 하나의 방식을 제공한다. </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Promise 생성자에는 resolve와 reject를 받는다.</span></span><br><span class="line"><span class="keyword">var</span> asyncFunc = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 여기서 시간이 걸리는 비동기 작업... 예) XMLHttpRequest()</span></span><br><span class="line">  <span class="comment">// 해당 비동기 성공하면 resolve(), 실패하면 reject()이 호출되도록 콜백 구성.</span></span><br><span class="line">  resolve(<span class="string">"success message"</span>);</span><br><span class="line">  reject(<span class="string">"fail message"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">asyncFunc</span><br><span class="line">  .then(<span class="function">(<span class="params">msg</span>) =&gt;</span> &#123; <span class="comment">// resolve()에 의해 호출됨.</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"SUCCESS:"</span> + msg);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function">(<span class="params">msg</span>) =&gt;</span> &#123; <span class="comment">// reject()에 의해 호출됨.</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"FAIL:"</span> + msg);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://soopdop.github.io/2017/06/29/Book-Deep-Javascript-9-9/" data-id="cjt3zcaif005o2sn216sfmv6t" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="http://soopdop.github.io/2017/06/29/Book-Deep-Javascript-9-9/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="http://soopdop.github.io/2017/06/29/Book-Deep-Javascript-9-9/">Comments</a>
    

        </footer>
    </div>
    
</article>



    <article id="blog-Book-Deep-Javascript-8-9" class="article article-type-blog" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/06/29/Book-Deep-Javascript-8-9/">[Book Summary] 속깊은 Javascript 8/9</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/06/29/Book-Deep-Javascript-8-9/">
            <time datetime="2017-06-29T09:35:15.000Z" itemprop="datePublished">2017-06-29</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/programming/">programming</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/javascript-Book-Summary/">javascript, Book Summary</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <img src="/2017/06/29/Book-Deep-Javascript-8-9/cover.jpg">
<h1 id="Chapter-8-Javascript-코딩과-개발-환경"><a href="#Chapter-8-Javascript-코딩과-개발-환경" class="headerlink" title="Chapter 8. Javascript 코딩과 개발 환경"></a>Chapter 8. Javascript 코딩과 개발 환경</h1><h2 id="8-1-자바스크립트-코딩-스타일"><a href="#8-1-자바스크립트-코딩-스타일" class="headerlink" title="8.1. 자바스크립트 코딩 스타일"></a>8.1. 자바스크립트 코딩 스타일</h2><h3 id="8-1-1-변수-이름-표기법"><a href="#8-1-1-변수-이름-표기법" class="headerlink" title="8.1.1. 변수 이름 표기법"></a>8.1.1. 변수 이름 표기법</h3><p>Javascript에서는 camel case 표기법이 좋다. <code>getElementById</code> 처럼 DOM을 다루는 API들이 이미 채택하고 있기 때문이다. 여기에 다음과 같이 변수 타입을 나타내는 헝가리안 표기법을 더하는 것도 좋다.<br><figure class="highlight javascript"><figcaption><span>camel case + hungarian</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> nFirstVariable = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> strSecondVariable = <span class="string">""</span>;</span><br><span class="line"><span class="keyword">var</span> arrSomeLongVariableName = [];</span><br><span class="line"><span class="keyword">var</span> g_nGlobalVariable;</span><br></pre></td></tr></table></figure></p>
<h3 id="8-1-2-공백과-탭"><a href="#8-1-2-공백과-탭" class="headerlink" title="8.1.2. 공백과 탭"></a>8.1.2. 공백과 탭</h3><p>공백을 선호하는 추세로 바뀌고 있으나, 탭은 1바이트라는 장점을 가지고 있다. 이 책에서는 4칸이 가독성이 더 좋다고 하지만, depth가 깊어지면 보기가 어려워 진다는 것이 나의 의견. </p>
<h3 id="8-1-3-중괄호를-여는-위치"><a href="#8-1-3-중괄호를-여는-위치" class="headerlink" title="8.1.3. 중괄호를 여는 위치"></a>8.1.3. 중괄호를 여는 위치</h3><p>중괄호는 줄바꿈하지 않는 것이 좋고, 줄바꿈을 한다면 오동작을 주의해야 한다. Javascript는 세미콜론 사용에 대한 규칙을 느슨하게 적용하는데, <code>return</code> 다음 줄에 결과를 주더라도 <code>return;</code>으로 만들어 버리기 때문이다. </p>
<h3 id="8-1-4-strict-mode"><a href="#8-1-4-strict-mode" class="headerlink" title="8.1.4. strict mode"></a>8.1.4. strict mode</h3><p>ECMAScript 5가 권장하는 방법이다. <code>&quot;use strict&quot;</code>파일이나 함수에 추가함으로서 설정 가능하다. strict 모드에서 제한 되는 내용은 다음과 같다.</p>
<h4 id="“scope-내부에서-var-없이-global-변수를-선언할-수-없다-”"><a href="#“scope-내부에서-var-없이-global-변수를-선언할-수-없다-”" class="headerlink" title="“scope 내부에서 var 없이 global 변수를 선언할 수 없다.”"></a>“scope 내부에서 var 없이 global 변수를 선언할 수 없다.”</h4><p>책에서의 설명은 “var 없이 변수를 사용할때 레퍼런스 오류 발생”이라고 하는데 맞기도 하고 틀리기도 한 말이다. strict mode에서는 글로벌 변수를 선언할때도 var를 붙어야만 하기 때문이다. 하지만 아래와 같은 코드일 경우, global에 이미 선언되어 있으면 에러가 발생하지 않는다. 이 것은 delete가 변수에 동작하지 않는 것과도 연관이 있다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    globalVar = <span class="string">"This will be global"</span>; </span><br><span class="line">    <span class="comment">// 에러! 단, 이미 해당 글로벌 변수가 선언되어 있으면 에러 발생하지 않음.</span></span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure></p>
<h4 id="“delete를-변수나-함수에-사용할-수-없다-”"><a href="#“delete를-변수나-함수에-사용할-수-없다-”" class="headerlink" title="“delete를 변수나 함수에 사용할 수 없다.”"></a>“delete를 변수나 함수에 사용할 수 없다.”</h4><p>원래 객체의 속성을 지우는 기능이이라고 생각하면 쉽다. 그러나, <code>delete</code>에는 좀 더 깊은 내용이 숨어 있다. <code>var a = 1;</code> 와 <code>window.a = 1;</code>은 같은 글로벌 변수인데다가 결국 window객체의 속성 값인   <code>a</code>가 셋팅 되는 것이지만, <code>delete</code>의 가능 여부가 다르기 때문에 분명한 차이가 있다. hoisted와도 연관이 있다. <a href="&quot;https://stackoverflow.com/questions/1596782/how-to-unset-a-javascript-variable&quot;">Stack overflow</a>를 보고 나중에 보고 조금 더 정리 예정.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">delete</span> a; <span class="comment">// 에러!</span></span><br></pre></td></tr></table></figure>  </p>
<h4 id="“변수에-eval과-arguments를-이름으로-사용할-수-없다-”"><a href="#“변수에-eval과-arguments를-이름으로-사용할-수-없다-”" class="headerlink" title="“변수에 eval과 arguments를 이름으로 사용할 수 없다.”"></a>“변수에 eval과 arguments를 이름으로 사용할 수 없다.”</h4><p>이 것은 “좀 더 명료한 코드를 위해서”인 것으로 보인다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"><span class="keyword">var</span> <span class="built_in">arguments</span> = <span class="number">1</span>; <span class="comment">// 에러!</span></span><br><span class="line"><span class="keyword">var</span> <span class="built_in">eval</span> = <span class="number">1</span>; <span class="comment">// 이것도 에러!</span></span><br></pre></td></tr></table></figure>    </p>
<h3 id="“eval-함수-안에서-변수를-선언이-불가하다-”"><a href="#“eval-함수-안에서-변수를-선언이-불가하다-”" class="headerlink" title="“eval()함수 안에서 변수를 선언이 불가하다.(??)”"></a>“eval()함수 안에서 변수를 선언이 불가하다.(??)”</h3><p>이건 책이 명백히 틀렸다고 보여지는 내용이다. 에러 발생하지 않는다. 단지 주변 스코프에 영향의 주는지의 차이가 있음. </p>
<ul>
<li><p>일반모드 : 실행 컨텍스트에 영향을 줌. </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">eval</span>(<span class="string">"var a=42;a"</span>)); <span class="comment">// 42</span></span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// 42</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>strict 모드 : 실행 컨텍스트에 영향을 주지 않음. 새로운 스코프가 생기는 것처럼 보인다 (불명확함.)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">eval</span>(<span class="string">"var a=42;a"</span>)); <span class="comment">// 42</span></span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="“같은-이름의-파라미터-두개-이상-사용할-수-없다-”"><a href="#“같은-이름의-파라미터-두개-이상-사용할-수-없다-”" class="headerlink" title="“같은 이름의 파라미터 두개 이상 사용할 수 없다.”"></a>“같은 이름의 파라미터 두개 이상 사용할 수 없다.”</h3><ul>
<li><p>일반 모드 : 파라미터가 같으면 마지막 파라미터를 해당 변수명으로 인식한다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">a,a</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a); </span><br><span class="line">&#125;</span><br><span class="line">foo(<span class="number">1</span>,<span class="number">2</span>); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>strict 모드 : 파라미터가 같으면 문법 에러를 발생시킨다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">a,a</span>) </span>&#123; <span class="comment">// 에러!</span></span><br><span class="line">    <span class="built_in">console</span>.log(a); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="“arguments-caller-arguments-callee-에-접근할-수-없다-”"><a href="#“arguments-caller-arguments-callee-에-접근할-수-없다-”" class="headerlink" title="“arguments.caller, arguments.callee 에 접근할 수 없다.”"></a>“arguments.caller, arguments.callee 에 접근할 수 없다.”</h3><p>caller는 사라진 속성인 것 같고, callee를 strict 모드에서 접근하면 에러가 발생한다.</p>
<ul>
<li><p>일반 모드 : foo()와 함수 코드 출력.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>.callee); <span class="comment">// foo() &#123;...&#125;; </span></span><br><span class="line">&#125;</span><br><span class="line">foo();</span><br></pre></td></tr></table></figure>
</li>
<li><p>strict 모드 : callee에 접근하면 에러를 발생 시킨다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>.callee); <span class="comment">// 에러! </span></span><br><span class="line">&#125;</span><br><span class="line">foo();</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="“with-구문을-사용할-수-없다-”"><a href="#“with-구문을-사용할-수-없다-”" class="headerlink" title="“with 구문을 사용할 수 없다.”"></a>“with 구문을 사용할 수 없다.”</h3><p>앞장에서 본 모호함 때문인지, strict 모드에서는 사용 금지다.</p>
<h2 id="8-2-자바스크립트-검증-도구-JSLint"><a href="#8-2-자바스크립트-검증-도구-JSLint" class="headerlink" title="8.2. 자바스크립트 검증 도구 - JSLint"></a>8.2. 자바스크립트 검증 도구 - JSLint</h2><p>자바스크립트의 코드 검증 도구이다. 권장하는 방법과 모호한 표현을 잡아내고, 불필요한 공백까지도 경고를 출력한다. 예를 들어서 for in 내부에서 속성를 검사할 때 <code>hasOwnProperty()</code>를 사용하여 걸러 내는 것이 매우 중요하다. 그렇지 않으면, 프로토타입 체인에 있는 속성까지도 사용하게 되어 의도치 않은 결과가 나온다ㅏ. 여러 IDE에 대해서 JSLint 플러그인이 존재한다. 자세한 규칙에 관해서는 <a href="&quot;http://www.jslint.com/help.html&quot;">JSLint</a>를 참고하면 된다.</p>
<h2 id="8-3-자바스크립트-빌드-환경"><a href="#8-3-자바스크립트-빌드-환경" class="headerlink" title="8.3. 자바스크립트 빌드 환경"></a>8.3. 자바스크립트 빌드 환경</h2><p> 배포와 빌드에 관한 내용이다. Google Closure를 사용할 때의 설정과 실행방법에 대한 설명이다. 압축을 하거나, git에 hook 스크립트를 집어 넣거나, makefile을 만드는 것에 대한 설명이다.</p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://soopdop.github.io/2017/06/29/Book-Deep-Javascript-8-9/" data-id="cjt3zcai9005l2sn2w0ikmam3" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="http://soopdop.github.io/2017/06/29/Book-Deep-Javascript-8-9/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="http://soopdop.github.io/2017/06/29/Book-Deep-Javascript-8-9/">Comments</a>
    

        </footer>
    </div>
    
</article>



    <article id="blog-Book-Deep-Javascript-7-9" class="article article-type-blog" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/06/29/Book-Deep-Javascript-7-9/">[Book Summary] 속깊은 Javascript 7/9</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/06/29/Book-Deep-Javascript-7-9/">
            <time datetime="2017-06-29T09:35:11.000Z" itemprop="datePublished">2017-06-29</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/programming/">programming</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/javascript-Book-Summary/">javascript, Book Summary</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <img src="/2017/06/29/Book-Deep-Javascript-7-9/cover.jpg">
<h1 id="Chapter-7-자바스크립트-성능과-사용자-경험-개선"><a href="#Chapter-7-자바스크립트-성능과-사용자-경험-개선" class="headerlink" title="Chapter 7. 자바스크립트 성능과 사용자 경험 개선"></a>Chapter 7. 자바스크립트 성능과 사용자 경험 개선</h1><h2 id="7-1-lt-script-gt-태그위치와-레이지-로드"><a href="#7-1-lt-script-gt-태그위치와-레이지-로드" class="headerlink" title="7.1. &lt;script&gt; 태그위치와 레이지 로드"></a>7.1. <code>&lt;script&gt;</code> 태그위치와 레이지 로드</h2><h3 id="lt-script-gt-태그위치"><a href="#lt-script-gt-태그위치" class="headerlink" title="&lt;script&gt; 태그위치"></a><code>&lt;script&gt;</code> 태그위치</h3><p><code>&lt;script&gt;</code>는 block mode로 작동한다. script가 다 실행 될때까지 화면이 렌더링 되지 않는다. 그 이유는 <code>document.write()</code>로 html을 쓸 수도 있기 때문이라 한다. 따라서 <code>&lt;script&gt;</code> 태그는 html 문서의 가장 아래 쪽에 위치하는 것이 좋다.</p>
<h3 id="Lazy-Load-For-Script-File"><a href="#Lazy-Load-For-Script-File" class="headerlink" title="Lazy Load For Script File"></a>Lazy Load For Script File</h3><p>위와 같은 blocking현상을 막기 위해서 lazy load를 구현하는 것이다. lazy load의 구현은 구현 방법은 <code>window.attachEvent(&quot;onload&quot;)</code>와 <code>window.addEventListener(&quot;load&quot;)</code>를 이용해서 다음과 같이 구현한다.</p>
<figure class="highlight javascript"><figcaption><span>Script Lazy Load</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> previousOnload;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">window</span>.addEventListener) &#123;</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">"load"</span>, lazyload);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">window</span>.attachEvent) &#123;</span><br><span class="line">    <span class="built_in">window</span>.attachEvent(<span class="string">"onload"</span>, lazyload);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">window</span>.onload) &#123;</span><br><span class="line">    <span class="comment">// addEventListener와 attachEvnet가 없으면 onload로 구현하되,</span></span><br><span class="line">	  <span class="comment">// 이미 등록된 이벤트 핸들러를 백업해두었다가 나중에 같이 호출함.</span></span><br><span class="line">    previousOnload = <span class="built_in">window</span>.onload;</span><br><span class="line">    <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      previousOnload.call();</span><br><span class="line">      lazyload();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  	<span class="comment">// onload에 등록된 것도 없으면 그냥 할당.</span></span><br><span class="line">    <span class="built_in">window</span>.onload = lazyload; <span class="comment">// this can be overwritten by another JS</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">lazyload</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 새로운 script 태그를 만들고, 속성을 설정</span></span><br><span class="line">    <span class="keyword">var</span> scriptTag = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>),</span><br><span class="line">      headTag = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"head"</span>)[<span class="number">0</span>];</span><br><span class="line">    scriptTag.setAttribute(<span class="string">"src"</span>, <span class="string">"./sleep.js"</span>);</span><br><span class="line">    scriptTag.setAttribute(<span class="string">"type"</span>, <span class="string">"text/javascript"</span>);</span><br><span class="line">    scriptTag.setAttribute(<span class="string">"async"</span>, <span class="string">"true"</span>);</span><br><span class="line">    <span class="comment">// way around if there is no head tag</span></span><br><span class="line">    <span class="keyword">if</span> (!headTag) &#123;</span><br><span class="line">      headTag = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"script"</span>)[<span class="number">0</span>].parentNode;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// DOM에 추가</span></span><br><span class="line">    headTag.appendChild(scriptTag);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;());</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><code>window.onload</code> 를 이용할 수 있지만, 이 방식은 다수의 이벤트 핸들러를 등록하지 못하므로 기존에 등록되어 있던 것을 다 덮어 써버릴 염려가 있다. </p>
<h3 id="Lazy-Load-For-Image-File"><a href="#Lazy-Load-For-Image-File" class="headerlink" title="Lazy Load For Image File"></a>Lazy Load For Image File</h3><p>우선 다음과 같이 <code>class</code> 명을 주고, <code>src</code>는 <code>data-src</code>로 준다. 중요한 점은 <code>width</code>와 <code>height</code> 속성을 태그에 미리 주어서 자리차지를 하고 있는 것이 미관 좋다. 하지만, 모든 <code>img</code> 태그에 <code>width</code>와 <code>height</code>를 주는 것도 그렇게 좋은 방법은 아닌 것으로 보이므로 상황에 따라 잘 판단해야 할듯.<br><figure class="highlight html"><figcaption><span>lazy load를 위한 img태그</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">width</span>=<span class="string">"640"</span> <span class="attr">height</span>=<span class="string">"480"</span> <span class="attr">class</span>=<span class="string">"lazyload"</span> <span class="attr">data-src</span>=<span class="string">"./large_image.jpg"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">width</span>=<span class="string">"64"</span> <span class="attr">height</span>=<span class="string">"64"</span> <span class="attr">class</span>=<span class="string">"lazyload"</span> <span class="attr">data-src</span>=<span class="string">"./not_important_image.jpg"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>스크립트에서는 각 <code>img</code> 태그의 <code>data-src</code>를 <code>src</code>로 변경해주면 된다. </p>
<figure class="highlight javascript"><figcaption><span>lazy load를 위한 script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> previousOnload;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">window</span>.addEventListener) &#123;</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">"load"</span>, lazyloadImages);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">window</span>.attachEvent) &#123;</span><br><span class="line">    <span class="built_in">window</span>.attachEvent(<span class="string">"onload"</span>, lazyloadImages);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">window</span>.onload) &#123;</span><br><span class="line">    previousOnload = <span class="built_in">window</span>.onload;</span><br><span class="line">    <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      previousOnload.call();</span><br><span class="line">      lazyloadImages();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">window</span>.onload = lazyloadImages; <span class="comment">// this can be overwritten by another JS</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// lazyload 클래스를 가진 element를 찾아서 data-src를 src로 바꾸어 주면 끝.</span></span><br><span class="line">  <span class="comment">// 단, 이곳에 방어코드와 예외처리는 좀 더 필요할 것 같다.</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">lazyloadImages</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> imgList = <span class="built_in">document</span>.getElementsByClassName(<span class="string">"lazyload"</span>),</span><br><span class="line">      length = imgList.length,</span><br><span class="line">      i;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; length; i++) &#123;</span><br><span class="line">      imgList[i].src = imgList[i].getAttribute(<span class="string">"data-src"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure>
<h3 id="“Loading”-아이콘-보이기"><a href="#“Loading”-아이콘-보이기" class="headerlink" title="“Loading” 아이콘 보이기"></a>“Loading” 아이콘 보이기</h3><p>돌아가는 모습의 애니메이션을 넣기 위해서는 loading.gif를 준비하고 다음과 같은 css를 모든 <code>img</code>에 적용한다.<br><figure class="highlight css"><figcaption><span>CSS for lazy loading image</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.lazyload</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">"./loading.gif"</span>);</span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">64px</span> <span class="number">64px</span>;</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">  <span class="attribute">background-position</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>그 후, <code>lzayloadImages()</code>에서는 class를 변경하거나 createElement로 진 <code>img</code>를 만들어서 <code>replaceChild</code> element를 교체 한다.</p>
<h2 id="7-2-인터넷-환경에서의-HTTP-GET-최적화"><a href="#7-2-인터넷-환경에서의-HTTP-GET-최적화" class="headerlink" title="7.2. 인터넷 환경에서의 HTTP GET 최적화"></a>7.2. 인터넷 환경에서의 HTTP GET 최적화</h2><p>HTTP GET의 횟수를 줄이거나, 다운로드 되는 크기를 줄이는 것이 사용자 경험을 개선하는데 가장 효과적인 방법이라고 한다. </p>
<h3 id="7-2-1-소스-미니피케이션으로-GET-용량-최소화"><a href="#7-2-1-소스-미니피케이션으로-GET-용량-최소화" class="headerlink" title="7.2.1. 소스 미니피케이션으로 GET 용량 최소화"></a>7.2.1. 소스 미니피케이션으로 GET 용량 최소화</h3><p>minification을 통해서 소스의 다운로드 크기를 크게 줄일 수 있다. 이렇게 해주는 툴은 <a href="&quot;http://yui.github.io/yuicompressor/&quot;">YUI compressor</a>, <a href="&quot;https://developers.google.com/closure/compiler/&quot;">Google Closure complier</a>, <a href="&quot;http://crockford.com/javascript/jsmin&quot;">JSMin</a> 등이 있다</p>
<h3 id="7-2-2-파일을-압축해서-GET-용량-최소화"><a href="#7-2-2-파일을-압축해서-GET-용량-최소화" class="headerlink" title="7.2.2. 파일을 압축해서 GET 용량 최소화"></a>7.2.2. 파일을 압축해서 GET 용량 최소화</h3><p>더 조사해 봐야 하지만, 서버와 클라이언트는 <a href="&quot;https://developer.mozilla.org/ko/docs/Web/HTTP/Content_negotiation&quot;">Content negotiation</a> 과정을 거쳐서 동일한 URI에 대해서 여러가지 타입의 리소스를 주고 받을 수 있다. </p>
<img src="/2017/06/29/Book-Deep-Javascript-7-9/HTTPNegoServer.png" title="HTTP Content negotitiation">
<p>클라이언트는 서버로 요청을 보낼 시 <code>Accept-*</code> 헤더에 원하는 타입을 나열하여 서버로 요청을 보내고, 서버는 <code>Content-*</code>에 컨텐트의 타입을 명시하여 응답하는 방식이다. <code>Accept-Encoding</code>헤더에 gzip 또는 deflate를 넣어서 보내면 서버는 응답에 압축된 데이터를 넣어서 보내준다. </p>
<p>책에서는 아파치가 압축을 제공하기 위한 설정 방법에 대해서 설명하고 있지만, 딱히 기억해야할 만한 것은 아니다.  </p>
<h3 id="7-2-3-GET-요청-횟수-최소화-파일-합치기"><a href="#7-2-3-GET-요청-횟수-최소화-파일-합치기" class="headerlink" title="7.2.3. GET 요청 횟수 최소화(파일 합치기)"></a>7.2.3. GET 요청 횟수 최소화(파일 합치기)</h3><p>다운로드 크기를 최소화 하는 방법 외에 요청의 횟수 자체를 줄여 서버의 부담을 덜 수 있다. </p>
<h3 id="Script-파일-합치기"><a href="#Script-파일-합치기" class="headerlink" title="Script 파일 합치기"></a>Script 파일 합치기</h3><p>다수의 js파일을 로딩할 경우 다수의 <code>&lt;script&gt;</code>를 서버로 요청한다. 이 것을 하나로 줄이기 위해서 서버에 배포하기 전, 추가적인 빌드 과정을 통해서 js파일을 하나로 합치고, 더불어 압축하거나 미니피케이션까지 수행하기도 한다. 이렇게 하는 것에는 장단점이 있다.</p>
<ol>
<li>장점<ul>
<li>요청/응답 횟수의 최소화.</li>
<li>gzip 등의 압축 처리를 한번에 할 수 있음.</li>
</ul>
</li>
<li>단점<ul>
<li>추가적인 빌드 과정이 필요함.</li>
<li>부분 수정이 있을 경우, 캐시 효율이 떨어짐.</li>
</ul>
</li>
</ol>
<h4 id="주의할-점"><a href="#주의할-점" class="headerlink" title="주의할 점"></a>주의할 점</h4><p>각 js 파일에서 전역 “use strict”를 사용할 경우 문제가 발생할 수 있으니, local strict 모드를 사용하는 것이 좋다.</p>
<figure class="highlight css"><figcaption><span>CSS for lazy loading image</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="selector-tag">function</span>()&#123;&#125;(</span><br><span class="line">    "<span class="selector-tag">use</span> <span class="selector-tag">strict</span>"</span><br><span class="line">    // 생략</span><br><span class="line">));</span><br></pre></td></tr></table></figure>
<h3 id="Image-파일-합치기"><a href="#Image-파일-합치기" class="headerlink" title="Image 파일 합치기"></a>Image 파일 합치기</h3><p>Sprite Image를 사용하여 하나의 이미지를 받은 후 잘라서 사용하는 방식이다. 특히 아이콘과 같은 작은 이미지를 많이 사용할 때, 각각을 서버로 요청하는 대신 한번의 요청으로 많은 이미지를 받을 수 있다는 장점이 있다.</p>
<figure class="highlight html"><figcaption><span>sprite image</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.flag</span> &#123;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">background-image</span>: <span class="selector-tag">url</span>("<span class="selector-tag">flags</span><span class="selector-class">.png</span>");</span></span><br><span class="line"><span class="undefined">    background-size: 20px auto;</span></span><br><span class="line"><span class="undefined">    width: 20px;</span></span><br><span class="line"><span class="undefined">    height: 13px;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.en</span> &#123;</span></span><br><span class="line"><span class="undefined">    background-position: 0px -12px;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.cn</span> &#123;</span></span><br><span class="line"><span class="undefined">    background-position: 0px -23px;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.jp</span> &#123;</span></span><br><span class="line"><span class="undefined">    background-position: 0px -38px;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"flag ko"</span>&gt;</span><span class="tag">&lt;/<span class="name">img</span>&gt;</span>Korean<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"flag en"</span>&gt;</span><span class="tag">&lt;/<span class="name">img</span>&gt;</span>English<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"flag cn"</span>&gt;</span><span class="tag">&lt;/<span class="name">img</span>&gt;</span>Chinese<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"flag jp"</span>&gt;</span><span class="tag">&lt;/<span class="name">img</span>&gt;</span>Japanese<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>위 소스와 같이 <code>img</code>태그에 <code>src</code>를 설정하는 것이 아니라, 스타일에 <code>background-image</code>를 설정하고 각 이미지 마다 <code>background-position</code>을 다르게 설정하여 사용하고 있다.  </p>
<h3 id="7-2-4-Cache-설정"><a href="#7-2-4-Cache-설정" class="headerlink" title="7.2.4. Cache 설정"></a>7.2.4. Cache 설정</h3><ol>
<li>Expires 헤더<ul>
<li>특정 요청의 응답에 Expire time을 지정하면 그 시간이 되기 전까지 브라우저는 cache로부터 데이터를 가져다 쓴다. 하지만 웹페이지 변경 시 업데이트가 되지 않을 수 있는 문제가 있다.</li>
</ul>
</li>
<li>ETag 헤더<ul>
<li>일종의 해쉬이다. 클라이언트는 특정 요청에 대한 ETag 값을 보내면, 서버도 해당 요청의 최신 ETag와 비교해서 같다면, <code>HTTP 304 Not Modified</code> 응답을 보낸다. 그러면 클라이언트는 cache를 사용한다.   </li>
</ul>
</li>
</ol>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://soopdop.github.io/2017/06/29/Book-Deep-Javascript-7-9/" data-id="cjt3zcai5005h2sn2if0oi1a2" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="http://soopdop.github.io/2017/06/29/Book-Deep-Javascript-7-9/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="http://soopdop.github.io/2017/06/29/Book-Deep-Javascript-7-9/">Comments</a>
    

        </footer>
    </div>
    
</article>



    <article id="blog-Book-Deep-Javascript-6-9" class="article article-type-blog" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/06/29/Book-Deep-Javascript-6-9/">[Book Summary] 속깊은 Javascript 6/9</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/06/29/Book-Deep-Javascript-6-9/">
            <time datetime="2017-06-29T09:35:01.000Z" itemprop="datePublished">2017-06-29</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/programming/">programming</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/javascript-Book-Summary/">javascript, Book Summary</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <img src="/2017/06/29/Book-Deep-Javascript-6-9/cover.jpg"> 
<h1 id="Chapter-6-브라우저-환경에서의-자바스크립트"><a href="#Chapter-6-브라우저-환경에서의-자바스크립트" class="headerlink" title="Chapter 6. 브라우저 환경에서의 자바스크립트"></a>Chapter 6. 브라우저 환경에서의 자바스크립트</h1><h2 id="6-1-단일-스레드-환경"><a href="#6-1-단일-스레드-환경" class="headerlink" title="6.1. 단일 스레드 환경"></a>6.1. 단일 스레드 환경</h2><p>브라우저 환경의 가장 큰 특징은 Single thread 방식이라는 점이다. 자바스크립트 런타임은 처리해야 하는 요청을 순차적으로 처리하기 위해서 Queue(event queue/task queue, 이 책에서는 스레드 큐라는 용어를 사용하는데 맞는지 모르겠음.)를 사용한다.</p>
<h3 id="setTimeout-0-의-의미는"><a href="#setTimeout-0-의-의미는" class="headerlink" title="setTimeout(0)의 의미는?"></a>setTimeout(0)의 의미는?</h3><p>setTimeout(0)은  “즉시, 메세지큐에 새로운 메세지를 등록하라”는 뜻이다. 역시 이책은 명확하게 정의하지 않는다. <a href="&quot;&quot;https://stackoverflow.com/questions/33955650/what-is-settimeout-doing-when-set-to-0-milliseconds/33955673&quot;">이곳</a>과 <a href="&quot;http://blog.carbonfive.com/2013/10/27/the-javascript-event-loop-explained/&quot;">이곳</a> 참고하여 setTimeout을 정의하면 다음과 같다.</p>
<blockquote>
<p>setTimeout(func,n)은 “n밀리초 후에 func를 큐에 등록하라”는 뜻이다. </p>
</blockquote>
<p>이렇게 하면 전담 스레드가 있어야 할 것 같은데.. 정확한 구현은 알 수 없지만 setTimeout 사이에 어떠한 많은 작업들이 들어갈 수 있으므로, 적어도 <strong><em>“메세지를 즉시 큐에 등록하고 n밀리초를 기다리라”</em></strong>는 것은 절대 아니다.</p>
<p>따라서, setTimeout(0)은 즉시 메세지 큐에 메세지를 등록하지만 큐에 등록된 이전 작업의 시간에 따라서 실행 시점이 결정된다. 위의 정의가 맞다면, <code>setTimeout(func1,1000)</code>, <code>setTimeout(func2,2000)</code>, <code>setTimeout(func3,3000)</code>를 실행 한 뒤 10초 걸리는 작업이 있다면, <code>func1</code>/  <code>func2</code>/<code>func3</code>은 1초 간격이 아니라 몰아서 실행되어야 한다.<br><figure class="highlight javascript"><figcaption><span>setTimeout 실행 시점 테스트</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 우선 setTimeout() 3를 실행한다.</span></span><br><span class="line"><span class="keyword">var</span> i = <span class="number">0</span>;</span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;<span class="built_in">console</span>.log(<span class="string">"func1 실행 시점: "</span> + <span class="built_in">Date</span>.now())&#125;, <span class="number">1000</span>);</span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;<span class="built_in">console</span>.log(<span class="string">"func2 실행 시점: "</span> + <span class="built_in">Date</span>.now())&#125;, <span class="number">2000</span>);</span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;<span class="built_in">console</span>.log(<span class="string">"func3 실행 시점: "</span> + <span class="built_in">Date</span>.now())&#125;, <span class="number">3000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 10초 딜레이</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"sleep 시작: "</span> + <span class="built_in">Date</span>.now());</span><br><span class="line"><span class="keyword">var</span> waitUntil = <span class="built_in">Date</span>.now() + <span class="number">10000</span>;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">Date</span>.now() &lt; waitUntil) &#123;;&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"sleep 끝: "</span> + <span class="built_in">Date</span>.now());</span><br></pre></td></tr></table></figure></p>
<p>결과: “10초 딜레이 후, setTimeout에 등록되었던 함수들은 1초 간격이 아니라, 한꺼번에 실행된다.”<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sleep 시작: 1499216887137</span><br><span class="line">sleep 끝: 1499216897137</span><br><span class="line">func1 실행 시점: 1499216897143</span><br><span class="line">func2 실행 시점: 1499216897143</span><br><span class="line">func3 실행 시점: 1499216897144</span><br></pre></td></tr></table></figure></p>
<h3 id="setInterval-은-어떨까"><a href="#setInterval-은-어떨까" class="headerlink" title="setInterval()은 어떨까?"></a>setInterval()은 어떨까?</h3><p><code>setInterval</code>은 어떻게 정의해야할지 약간 난감하다. 다음 코드가 10초 전의 메세지들을 몰아서 실행하지 않고, 10초간의 sleep 중에는 전혀 메세지가 등록되지 않기 때문이다.</p>
<figure class="highlight javascript"><figcaption><span>setTimeout 실행 시점 테스트</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> i = <span class="number">0</span>;</span><br><span class="line">setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">""</span>+(i++)+<span class="string">"번째 실행 시점: "</span> + <span class="built_in">Date</span>.now())</span><br><span class="line">&#125;, <span class="number">2000</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"sleep 시작: "</span> + <span class="built_in">Date</span>.now());</span><br><span class="line"><span class="keyword">var</span> waitUntil = <span class="built_in">Date</span>.now() + <span class="number">10000</span>;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">Date</span>.now() &lt; waitUntil) &#123;;&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"sleep 끝: "</span> + <span class="built_in">Date</span>.now());</span><br></pre></td></tr></table></figure>
<p><code>setInterval()</code>은 <code>setTimeout()</code>과는 좀 다르게, 이전 <code>func</code>가 실행되지 않고 큐에 쌓여있는 상태면 더이상 큐에 등록하지 않는다. 따라서 다음과 같이 정의할 수 있다.</p>
<blockquote>
<p>setInterval(func, n)은 “n밀리초 후에 func를 큐에 등록하라. 그리고 큐에 이전 func가 없을 때 반복하라.”는 뜻이다. </p>
</blockquote>
<h3 id="조사-setInterval-과-Recursive-setTimeout-은-어떻게-다를까"><a href="#조사-setInterval-과-Recursive-setTimeout-은-어떻게-다를까" class="headerlink" title="(조사) setInterval()과 Recursive setTimeout()은 어떻게 다를까?"></a>(조사) setInterval()과 Recursive setTimeout()은 어떻게 다를까?</h3><p>둘의 차이를 인지하고 필요한 곳에 사용해야 한다.</p>
<h4 id="setInterval-의-시간-간격"><a href="#setInterval-의-시간-간격" class="headerlink" title="setInterval()의 시간 간격"></a>setInterval()의 시간 간격</h4><p>시작 시간부터 일정 간격으로 호출하려고 시도한다. 그러나 작업이 길어져서 큐에 이전 작업이 들어있다면 그 시점은 건너 뛰고, 다음 시점에 실행한다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> i = <span class="number">1</span>;</span><br><span class="line">setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  func(i);</span><br><span class="line">&#125;, <span class="number">100</span>);</span><br></pre></td></tr></table></figure></p>
<img src="/2017/06/29/Book-Deep-Javascript-6-9/setinterval-interval.png" title="setInterval()의 간격">
<h4 id="Recurcive-setTimeout-의-시간-간격"><a href="#Recurcive-setTimeout-의-시간-간격" class="headerlink" title="Recurcive setTimeout()의 시간 간격"></a>Recurcive setTimeout()의 시간 간격</h4><p>이 때는 func 안에서 다시 setTimeout()이 호출되는 시점으로부터 에서부터 다시 큐에 넣을 시간을 정한다.  </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> i = <span class="number">1</span>;</span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span> <span class="title">run</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  func(i);</span><br><span class="line">  setTimeout(run, <span class="number">100</span>);</span><br><span class="line">&#125;, <span class="number">100</span>);</span><br></pre></td></tr></table></figure>
<img src="/2017/06/29/Book-Deep-Javascript-6-9/settimeout-interval.png" title="Recurcive setTimeout()의 간격">
<p>( 출처: <a href="https://javascript.info/settimeout-setinterval" target="_blank" rel="noopener">https://javascript.info/settimeout-setinterval</a>, <a href="http://jdm.kr/blog/97" target="_blank" rel="noopener">http://jdm.kr/blog/97</a> )</p>
<h2 id="6-2-requestAnimationFrame"><a href="#6-2-requestAnimationFrame" class="headerlink" title="6.2. requestAnimationFrame()"></a>6.2. requestAnimationFrame()</h2><p>애니메이션을 그리기 위한 타이밍API이다. <code>setInterval()</code> 과 다른점은 UI를 다시 그려야할 경우가 아니라면 호출되지 않고, 모니터 주파수에 맞게 출력된다고 한다. 이처럼 성능면에서 좀 더 좋다고 한다.</p>
<iframe scrolling="no" width="100%" height="300" src="//jsfiddle.net/m29tp6xq/embedded/result,js,html/dark" frameborder="0" allowfullscreen></iframe>
<h2 id="6-3-DOM과-자바스크립트"><a href="#6-3-DOM과-자바스크립트" class="headerlink" title="6.3. DOM과 자바스크립트"></a>6.3. DOM과 자바스크립트</h2><p>DOM은 ‘Document Object Model’의 약자로 HTML/XML 문서를 트리형태로 다루는 API이다. </p>
<h3 id="6-3-1-DOM-repaint-amp-reflow"><a href="#6-3-1-DOM-repaint-amp-reflow" class="headerlink" title="6.3.1. DOM repaint &amp; reflow"></a>6.3.1. DOM repaint &amp; reflow</h3><p>이 책의 설명은 역시나 명확하지 않다. DOM repaint와 reflow의 차이는 다음과 같다.</p>
<ul>
<li>reflow : DOM node의 레이아웃 수치(높이, 위치)가 변경되어 랜더 트리를 재생성하는 과정이다. 전체 또는 부분 트리를 재생성해야 하므로 그 만큼 성능에 큰 영을 미침. </li>
<li>repaint : color/visibility 등의 스타일이 바뀔 때 다시 그리는 과정. reflow보다는 성능에 영향을 덜 미침.</li>
</ul>
<p>이 <a href="&quot;https://www.slideshare.net/myposter_techtalks/how-browsers-work-74804349&quot;">슬라이드</a>를 보면 브라우저가 어떻게 랜더링을 하는지 잘 알수 있다. 요약하자면, 그림에서와 같이 브라우저는 렌더링을 위해서 DOM tree와 CSSOM tree 를 통해서 <strong>Render tree</strong>를 만들고, <strong>layout</strong>을 재구성한 뒤, <strong>painting</strong>을 하게 된다. 여기서의 <strong>layout</strong>이 reflow이다.</p>
<img src="/2017/06/29/Book-Deep-Javascript-6-9/how_browers_work.png" title="브라우저의 렌더링 과정">
<p>그리고, 크롬 개발자 도구 &gt; performance &gt; call tree를 보면 layout과 paint에 걸리는 시간을 확인할 수 있다.</p>
<img src="/2017/06/29/Book-Deep-Javascript-6-9/call_tree.png" title="크롬 개발자 도구에서 본 call tree">
<h4 id="Reflow를-최소화-하는-몇가지-방법"><a href="#Reflow를-최소화-하는-몇가지-방법" class="headerlink" title="Reflow를 최소화 하는 몇가지 방법"></a>Reflow를 최소화 하는 몇가지 방법</h4><p>몇가지 방법으로 reflow를 최소화 할 수 있다 한다.</p>
<ol>
<li><code>position:relative</code> 컨터에너 안에 <code>position:absolute</code> 엘리멘트를 넣어서 reflow 영역 최소화. </li>
<li>태그명을 선택자로 스타일을 정의하는 것 보다 class나 id를 기반으로 스타일을 적용하는 것이 성능이 좋다.</li>
<li>여러 개의 element를 추가 할때는 하나하나 추가하지 말고 아니라 <code>DocumentFragment</code>를 이용하는 것이 좋다.<ul>
<li><code>createDocumentFragment()</code> 을 이용해서 가상의 DOM tree를 구성한 뒤, 최종적으로 <code>appendChild()</code>로 실제 DOM tree에 추가하는 것이다.</li>
</ul>
</li>
<li>엘리멘트를 <code>display:none</code> 상태로 두고 조작한다.</li>
<li><code>offsetWidth</code>, <code>clientHeight</code> 등에 접근할 경우 reflow가 일어난다. 구글에서 <strong>“layout thrashing”</strong> 을 검색하면 많은 정보가 있다.  </li>
</ol>
<h3 id="6-3-3-DOM-탐색-횟수-최소화를-통한-성능-개선"><a href="#6-3-3-DOM-탐색-횟수-최소화를-통한-성능-개선" class="headerlink" title="6.3.3. DOM 탐색 횟수 최소화를 통한 성능 개선"></a>6.3.3. DOM 탐색 횟수 최소화를 통한 성능 개선</h3><p>memoization과 cache 등을 활용해서 getElementById를 최소화 한다. </p>
<h2 id="6-4-웹-워커"><a href="#6-4-웹-워커" class="headerlink" title="6.4. 웹 워커"></a>6.4. 웹 워커</h2><h3 id="Web-Worker"><a href="#Web-Worker" class="headerlink" title="Web Worker"></a>Web Worker</h3><blockquote>
<p>Single thread 기반인 브라우저 환경을 개선하고자 도입된 개념이다.</p>
</blockquote>
<p>낮은 버전의 브라우저는 지원하지 않는다.</p>
<h3 id="SharedWorker"><a href="#SharedWorker" class="headerlink" title="SharedWorker"></a>SharedWorker</h3><blockquote>
<p>다른 윈도우, iframe, web worker 등 다른 컨텍스트에서도 접근이 가능한 워커이다.</p>
</blockquote>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://soopdop.github.io/2017/06/29/Book-Deep-Javascript-6-9/" data-id="cjt3zcai0005e2sn2g2y5ombc" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="http://soopdop.github.io/2017/06/29/Book-Deep-Javascript-6-9/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="http://soopdop.github.io/2017/06/29/Book-Deep-Javascript-6-9/">Comments</a>
    

        </footer>
    </div>
    
</article>



    <article id="blog-Book-Deep-Javascript-5-9" class="article article-type-blog" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/06/29/Book-Deep-Javascript-5-9/">[Book Summary] 속깊은 Javascript 5/9</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/06/29/Book-Deep-Javascript-5-9/">
            <time datetime="2017-06-29T09:34:55.000Z" itemprop="datePublished">2017-06-29</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/programming/">programming</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/javascript-Book-Summary/">javascript, Book Summary</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <img src="/2017/06/29/Book-Deep-Javascript-5-9/cover.jpg"> 
<h1 id="Chapter-5-디자인-패턴-실용"><a href="#Chapter-5-디자인-패턴-실용" class="headerlink" title="Chapter 5. 디자인 패턴 실용"></a>Chapter 5. 디자인 패턴 실용</h1><p>이 책에서는 자주 볼 수있는 유용한 패턴을 몇가지 소개하고 있다.</p>
<h2 id="5-2-모듈-패턴"><a href="#5-2-모듈-패턴" class="headerlink" title="5.2. 모듈 패턴"></a>5.2. 모듈 패턴</h2><blockquote>
<p>소스를 모듈 단위로 관리하기 위해서 쓰이는 패턴이다. 대표적인 예로 jQuery의 <code>$</code>를 들 수 있다.</p>
</blockquote>
<figure class="highlight javascript"><figcaption><span>기본 틀</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">window</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> myLibrary = &#123;</span><br><span class="line">        method1 : <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">        method2 : <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">window</span>.myLibrary = myLibrary <span class="comment">// 글로벌 변수로 등록.</span></span><br><span class="line">&#125;(<span class="built_in">window</span>));</span><br></pre></td></tr></table></figure>
<p>위와 같이 <code>window</code> 에 등록하는 방법, 아래와 같이 리턴을 받아서 할당하는 방법이 있다.</p>
<figure class="highlight javascript"><figcaption><span>리턴 받아서 글로벌 변수에 할당하기</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myLibrary = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        method1 : <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">        method2 : <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure>
<h2 id="5-2-이벤트-델리게이션-패턴"><a href="#5-2-이벤트-델리게이션-패턴" class="headerlink" title="5.2. 이벤트 델리게이션 패턴"></a>5.2. 이벤트 델리게이션 패턴</h2><p>이 책에서는 정의를 제대로 내리지 않고 유용한 상황을 먼저 설명하고 있다. 아래는 내가 정의한 이벤트 델리게이션이다.</p>
<blockquote>
<p>“이벤트 델리게이션 패턴이란 다수의 element에 각각에 event handler를 할당하는 것이 아니라, 그 것을 감싸는 부모 element에 하나의 event handler만 할당하여 처리하는 방식이다. 이 때, 조건문을 통해서 각 element의 이벤트를 처리한다.” </p>
</blockquote>
<h3 id="조사-이벤트-버블링과-캡쳐링"><a href="#조사-이벤트-버블링과-캡쳐링" class="headerlink" title="(조사) 이벤트 버블링과 캡쳐링"></a>(조사) 이벤트 버블링과 캡쳐링</h3><p>이벤트 버블링과 캡쳐링은 이벤트가 전파되는 방향을 개발자가 설정하는 것이 아니다. 이미 브라우저는 특정 순서로 이벤트를 전파하고 있다. 이 때, 개발자가 부모와 자식 element에 각각 이벤트 핸들러를 등록해 두었을 경우, 브라우저가 전파하는 순서대로 그 이벤트 핸들러가 호출된다. 같은 element에 <code>addEventListener(event, func1, true)</code>, <code>addEventListener(event, func2, false)</code>로 capturing과 bubbling되는 이벤트를 처리할 수 있는 것은 w3c의 표준에 의해서 브라우저가 이미 두개의 흐름을 만들어 두었기 때문이다. 따라서 위와 같이 하나의 element에 capturing과 bubbling 이벤트 핸들러를 등록해 놓을 수 있고, 그렇이 하면 capturing으로 설정한 이벤트 핸들러인 func1이 먼저 호출된다. 그 이유는 다음에서 설명된다. </p>
<h4 id="조사-왜-버블링인가"><a href="#조사-왜-버블링인가" class="headerlink" title="(조사) 왜 버블링인가?"></a>(조사) 왜 버블링인가?</h4><p>책에서는 자식 element로부터 부모 element로 이벤트가 전파되는 것을 버블링이라고 설명한다. 이 설명은 그냥 외우라는 것 그 이상 그 이하도 아니다. 한참을 찾은 끝에 <a href="https://www.kirupa.com/html5/event_capturing_bubbling_javascript.htm" target="_blank" rel="noopener">이 곳</a>에서 버블이라고 부르는 이유를 깨달을 수 있었다. 가장 헷갈렸던 부분은 bubble은 위로 올라가는데, 레이어의 순서를 기준으로 볼때 자식은 위쪽에 있기에 반대라고 생각했다. 하지만, 그 것 보다는 Tree를 생각해야 한다. HTML과 BODY를 최상위에 놓고 아래로 자식 element들을 트리 형태로 나열 한 그림을 놓고 볼때, 이벤트 버블링이 무엇인지 직관적으로 이해할 수 있다. 그 트리에서 가장 자식이 되는 element부터 최상위 부모까지 전달되며 버블처럼 올라가는 모습이 이벤트 버블링이다.   </p>
<h4 id="조사-왜-캡쳐링인가"><a href="#조사-왜-캡쳐링인가" class="headerlink" title="(조사) 왜 캡쳐링인가?"></a>(조사) 왜 캡쳐링인가?</h4><p>열심히 검색해 봤으나 딱히 훌륭한 이유를 찾지는 못했다. 다만, 이벤트가 target으로부터 시작되는 버블링과는 달리, 어딘가로부터 시작된 이벤트가 여러 element를 거쳐 최종적으로 이벤트가 target으로 오게 되는 것으로 이해해 볼 수 있다. 즉 이벤트가 발생한 target element로부터 생겨난 버블이 뽀글뽀글 올라가는 것과는 정반대로, 최종적으로 target element로 가는 event를 그 조상(window,html,body)들이 가로채(capturing) 수 있다고 이해하면 될 것같다.  </p>
<h4 id="조사-이벤트-캡처링과-버블링은-어떻게-동작하는가"><a href="#조사-이벤트-캡처링과-버블링은-어떻게-동작하는가" class="headerlink" title="(조사) 이벤트 캡처링과 버블링은 어떻게 동작하는가?"></a>(조사) 이벤트 캡처링과 버블링은 어떻게 동작하는가?</h4><p>넷스케이프와 마이크로소프트가 각각 capturing과 bubbling방식 만을 지원했다. 하지만 W3C 표준에서는 두가지를 다 지원하도록 만들었다. 첫번째 단계에서는 capturing방식으로 이벤트를 전파하고, target에 도착한 뒤, bubbling방식으로 다시 이벤트를 전파한다. </p>
<img src="/2017/06/29/Book-Deep-Javascript-5-9/eventflow.png" title="Event flow">
<p>아래 소스와 같이 capturing과 bubbling 둘 다를 처리하도록 만들고 테스트 해 보면, 전체 순서를 파악할 수 있다.    </p>
<figure class="highlight html"><figcaption><span>이벤트 캡처링과 버블링</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">  body * &#123;</span></span><br><span class="line"><span class="undefined">    margin: 10px;</span></span><br><span class="line"><span class="undefined">    border: 1px solid blue;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span>FORM</span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>DIV</span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>P<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">for</span>(<span class="keyword">let</span> elem <span class="keyword">of</span> <span class="built_in">document</span>.querySelectorAll(<span class="string">'*'</span>)) &#123;</span></span><br><span class="line"><span class="javascript">    elem.addEventListener(<span class="string">"click"</span>, e =&gt; alert(<span class="string">`Capturing: <span class="subst">$&#123;elem.tagName&#125;</span>`</span>), <span class="literal">true</span>);</span></span><br><span class="line"><span class="javascript">    elem.addEventListener(<span class="string">"click"</span>, e =&gt; alert(<span class="string">`Bubbling: <span class="subst">$&#123;elem.tagName&#125;</span>`</span>));</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="이벤트-델리게이션-예제"><a href="#이벤트-델리게이션-예제" class="headerlink" title="이벤트 델리게이션 예제"></a>이벤트 델리게이션 예제</h4><iframe scrolling="no" width="100%" height="300" src="//jsfiddle.net/sa0e8L8q/embedded/js,html,result/dark" frameborder="0" allowfullscreen></iframe>
<h4 id="그-밖에-이벤트-처리를-위해서-알아야-할-함수"><a href="#그-밖에-이벤트-처리를-위해서-알아야-할-함수" class="headerlink" title="그 밖에 이벤트 처리를 위해서 알아야 할 함수"></a>그 밖에 이벤트 처리를 위해서 알아야 할 함수</h4><h5 id="e-stopPropagation"><a href="#e-stopPropagation" class="headerlink" title="e.stopPropagation()"></a>e.stopPropagation()</h5><p>위 예제에서 stopPropagation 함수는 그다지 쓸모가 없다. 다음과 같은 경우에 사용한다. 부모 element인 <code>controlPanel</code>에 클릭이나 드래그를 할 수 있도록 만든다고 가정한다. 이 때, <code>controlPanel</code>에 이벤트 핸들러를 할당한다면, 그 자식인 play 버튼을 눌러도 이벤트 버블링에 의해서 부모 element인 <code>controlPanel</code>의 핸들러가 호출될 것이다. 이러한 상황을 막기 위해서 <code>stopPropagation()</code>을  사용한다.</p>
<h5 id="e-stopImmediatePropagation"><a href="#e-stopImmediatePropagation" class="headerlink" title="e.stopImmediatePropagation()"></a>e.stopImmediatePropagation()</h5><p>만약 하나의 target element에 두개 이상의 이벤트 핸들러가 할당되어 있을 경우, 할당한 순서대로 호출된다. 그런데 <code>stopPropagation()</code>으로는 하위나 상위 element로의 이벤트 전달은 막을 수 있어도, 같은 엘리멘트에 등록되어있는 이벤트 핸들러의 호출은 막지 못한다. 이 때, 사용하는 것이  <code>stopImmediatePropagation()</code>이다.</p>
<iframe scrolling="no" width="100%" height="300" src="//jsfiddle.net/8jg05urm/embedded/js,html,result/dark" frameborder="0" allowfullscreen></iframe>
<h5 id="e-preventDefault"><a href="#e-preventDefault" class="headerlink" title="e.preventDefault()"></a>e.preventDefault()</h5><p>기본적으로 처리하는 이벤트를 막는다. 예를 들면, <code>&lt;a&gt;</code>의 경우 클릭하면 특정 url로 이동하게 되어있다. <code>&lt;a&gt;</code>가 다른 동작을 하도록 만들려면  <code>preventDefault()</code> 를 사용해야 한다.</p>
<h2 id="5-3-프락시-패턴"><a href="#5-3-프락시-패턴" class="headerlink" title="5.3. 프락시 패턴"></a>5.3. 프락시 패턴</h2><p>이 책은 직접적인 정의를 내리지 않고, <strong>“X란 일반적으로 이런 것은 이런 곳에 쓰이는데, 이러한 것을 X라 한다.”</strong>는 패턴을 사용한다–; 자꾸 인터넷을 찾아봐야 하게 만드는 책이라는 생각이 든다. Javascript에서는 Proxy를 객체로 구현하여 사용하며, 다음의 Proxy 객체에 대한 나의 정의이다. </p>
<blockquote>
<p>Javascript에서의 Proxy 객체는 특정 객체들의 인터페이스로써 이용되는 객체이다.</p>
</blockquote>
<p>약간의 데코레이터 패턴과 그 모양새과 목적면에서 섞여 있는 듯하다. 다음과 같은 목적으로 사용할 수 있다.</p>
<ol>
<li>델리게이션 패턴 조합에 사용 </li>
<li>캐시 기능 구현에 사용</li>
<li>http 요청의 제어에 사용</li>
<li>래퍼 기능 구현에 사용</li>
</ol>
<h3 id="“델리게이션-패턴-조합에-사용”"><a href="#“델리게이션-패턴-조합에-사용”" class="headerlink" title="“델리게이션 패턴 조합에 사용”"></a>“델리게이션 패턴 조합에 사용”</h3><p>델리게이션 패턴을 구현할 때는 안쪽에 <code>if</code> 문을 사용해서 event와 target에 따른 분기를 해주는 것이 일반적인데, proxy 객체를 구현해서 좀 더 깔끔하게 만들 수 있다. 그리고 아래의 예제와 같이 구현하는 이유는 더 명확한 모듈화 가 가능하다는 이유에 인 것 같다. <code>eventHandler</code>는 이벤트를 처리해주는 역할만 하고, <code>proxy</code>는 중계자 역할, <code>controllerObj</code> 는 실제로 동작하는 루틴을 가진 객체이다. </p>
<iframe scrolling="no" width="100%" height="300" src="//jsfiddle.net/jy6g3btz/embedded/js,html,result/dark" frameborder="0" allowfullscreen></iframe>
<h3 id="“캐시-기능-구현에-사용”"><a href="#“캐시-기능-구현에-사용”" class="headerlink" title="“캐시 기능 구현에 사용”"></a>“캐시 기능 구현에 사용”</h3><p>성능에 영향을 미치는 작업을 수행하는 객체에 대한 proxy객체를 만들어 캐시 기능을 구현할 때 쓰인다. 다음은 직접 작성한 예제. </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> phoneBook = &#123;</span><br><span class="line">  searchUserByName(user) &#123;</span><br><span class="line">    <span class="comment">// 성능에 영향을 미치는 작업</span></span><br><span class="line">    <span class="keyword">return</span> userInfo;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> proxyPhoneBookForCache = &#123;</span><br><span class="line">  cache :  &#123;&#125;,</span><br><span class="line">  searchUserByName : <span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (cache.hasOwnProperty(value)) &#123;</span><br><span class="line">      <span class="keyword">return</span> cache[value];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      cache[value] = phoneBook.searchUserByName(value);</span><br><span class="line">      <span class="keyword">return</span> cache[value];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="http-요청의-제어에-사용"><a href="#http-요청의-제어에-사용" class="headerlink" title="http 요청의 제어에 사용"></a>http 요청의 제어에 사용</h3><p>proxy를 이용하여 http요청을 한꺼번에 모아서 보내거나, 한번의 요청을 여러번의 요청으로 나누어 보내는 것이</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="5-4-데코레이터-패턴"><a href="#5-4-데코레이터-패턴" class="headerlink" title="5.4. 데코레이터 패턴"></a>5.4. 데코레이터 패턴</h2><blockquote>
<p>데코레이터란 특정 객체에 추가적인 기능을 동적으로 추가하는 패턴이다. </p>
</blockquote>
<h3 id="form-validation을-위한-데코레이터"><a href="#form-validation을-위한-데코레이터" class="headerlink" title="form validation을 위한 데코레이터"></a>form validation을 위한 데코레이터</h3><p>아래의 예제가 decorator pattern인지는 잘 모르겠다. 오히려 인터넷에서 찾은 <a href="http://robdodson.me/javascript-design-patterns-decorator/" target="_blank" rel="noopener">js pattern decorator</a>가 조금 더 명확한 것으로 보이나 확실하지는 않. 위 블로그에서는 기본 validator 객체에 <code>decorate()</code>를 통해서 필요한 기능을 사용하겠다고 동적으로 선언했다. 그런데 이 예제에서는 <code>decorate()</code>가 미리 정해진 규칙을 추가하는 용도로 쓰이기 때문에 좀 이상하다. 그래도 validator를 모듈화 하는데는 유용할 것으로 보인다.    </p>
<iframe scrolling="no" width="100%" height="300" src="//jsfiddle.net/nkwegfxy/embedded/js,html,result/dark" frameborder="0" allowfullscreen></iframe>
<h3 id="객체-기반-데코레이터"><a href="#객체-기반-데코레이터" class="headerlink" title="객체 기반 데코레이터"></a>객체 기반 데코레이터</h3><p>자바를 기반으로 한 데코레이터 패턴은 다음 링크에 잘 나와있다(<a href="http://jusungpark.tistory.com/9" target="_blank" rel="noopener">http://jusungpark.tistory.com/9</a>) 아래의 예제에서도 <code>Computer</code> 객체를 <code>decorate()</code>에 통과 시켜서 <strong>*꾸며진 Computer</strong>를 만들어 낸다. <code>Decorator</code> 객체는 각종 부품에 대한 정보를 관리하는 객체이며, 각 <code>Computer</code>객체는 <code>Decorator</code> 객체로 부터 부품 정보를 이용한다. 이 패턴의 좋은 점은 특정 객체에서 부품 리스트를 관리한다는 것이고, 부품의 가격이 변한다 해도 그 것에 대한 레퍼런스를 가진 <code>Computer</code> 객체는 항상 최신 정보를 가질 수 있다는 것이다. 하지만, 그렇게 하려면, 굳이 들어있는 totlal price를 저장하는 부분을 없애야 할 것으로 보인. </p>
<iframe scrolling="no" width="100%" height="300" src="//jsfiddle.net/ujvaa6q7/embedded/js,result/dark" frameborder="0" allowfullscreen></iframe>
<h3 id="함수-기반-데코레이터"><a href="#함수-기반-데코레이터" class="headerlink" title="함수 기반 데코레이터"></a>함수 기반 데코레이터</h3><p>객체가 가진 각 함수들을 꾸민다. before, after에 기능을 넣어 각 함수의 시작과 끝 시간을 보여준다. </p>
<iframe scrolling="no" width="100%" height="300" src="//jsfiddle.net/nmd7dfg2/embedded/js,result/dark" frameborder="0" allowfullscreen></iframe>
<h2 id="5-5-init-time-branching-패턴"><a href="#5-5-init-time-branching-패턴" class="headerlink" title="5.5. init-time branching 패턴"></a>5.5. init-time branching 패턴</h2><blockquote>
<p>init-time branching이란 초기화 단계에서 분기하여 같은 함수를 환경에 따르게 다르게 정의하는 것을 의미한다. </p>
</blockquote>
<h3 id="addEventHandler와-removeEventHandler의-표준-호환성-지원"><a href="#addEventHandler와-removeEventHandler의-표준-호환성-지원" class="headerlink" title="addEventHandler와 removeEventHandler의 표준 호환성 지원"></a>addEventHandler와 removeEventHandler의 표준 호환성 지원</h3><p>IE8 이하에서는 <code>addEventListener</code>가 없다. 따라서 다음과 같이 <code>attachEvent</code>를 통해서 구현할 수 있으며, 인터넷을 검색해 보면 관련하여 많은 정보가 나온다.</p>
<figure class="highlight javascript"><figcaption><span>표준 호환을 위한 이벤트 핸들러 함수 정의</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!Element.prototype.addEventListener) &#123;</span><br><span class="line">        <span class="keyword">if</span> (Element.prototype.attachEvent) &#123;</span><br><span class="line">            Element.prototype.addEventListener = <span class="function"><span class="keyword">function</span> (<span class="params">type, fn</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">this</span>.attachEvent(<span class="string">"on"</span> + type, fn);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            Element.prototype.addEventListener = <span class="function"><span class="keyword">function</span> (<span class="params">type, fn</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">this</span>[<span class="string">"on"</span> + type] = fn;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!Element.prototype.removeEventListener) &#123;</span><br><span class="line">        <span class="keyword">if</span> (Element.prototype.detachEvent) &#123;</span><br><span class="line">            Element.prototype.removeEventListener = <span class="function"><span class="keyword">function</span> (<span class="params">type, fn</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">this</span>.detachEvent(<span class="string">"on"</span> + type, fn);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            Element.prototype.removeEventListener = <span class="function"><span class="keyword">function</span> (<span class="params">type</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">this</span>[<span class="string">"on"</span> + type] = <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure>
<h3 id="XMLHttpRequest-객체-호환성-지원"><a href="#XMLHttpRequest-객체-호환성-지원" class="headerlink" title="XMLHttpRequest 객체 호환성 지원"></a>XMLHttpRequest 객체 호환성 지원</h3><p>과거의 IE는 <code>XMLHttpRequest</code> 표준 함수가 없어서 <code>ActiveXObject</code>를 이용해야 했다. 이를 대비하여 브라우저에 맞는 <code>getXHR()</code>을 리턴하는 패턴이다. </p>
<figure class="highlight javascript"><figcaption><span>XMLHttpRequest 객체 호환성 지원</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getXHR</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">window</span>.XMLHttpRequest) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ActiveXObject(<span class="string">"MSXML2.XMLHTTP.6.0"</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> ActiveXObject(<span class="string">"MSXML2.XMLHTTP.3.0"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">            alert(<span class="string">"This browser does not support XMLHttpRequest."</span>); <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-6-Self-defining-function-패턴"><a href="#5-6-Self-defining-function-패턴" class="headerlink" title="5.6. Self-defining function 패턴"></a>5.6. Self-defining function 패턴</h2><blockquote>
<p>어떤 코드를 최초 한번만 실행되도록 하는 패턴을 말한다.</p>
</blockquote>
<p>다음과 같은 코드로 함수 내부에서 자기 자신을 가리키는 참조 변수를 새로운 함수로 교체하는 방식으로 패턴을 구현한다. <strong>“처음에만 어떤 것을 초기화”</strong> 하거나, <strong>“중복 호출되지 않도록 막는 기능”</strong>을 구현할 때 유용하게 쓸 수 있다 글로벌 변수가 아닌 클로저를 사용할 수 있다.<br><figure class="highlight javascript"><figcaption><span>Self-defining</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 글로벌 func 선언</span></span><br><span class="line"><span class="keyword">var</span> func = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"The first."</span>);</span><br><span class="line">    <span class="comment">// 한번 호출 뒤 글로벌 func가 변경됨.</span></span><br><span class="line">    func = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"The time after first."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">func(); <span class="comment">// The first</span></span><br><span class="line">func(); <span class="comment">// The time after first </span></span><br><span class="line">func(); <span class="comment">// The time after first</span></span><br></pre></td></tr></table></figure></p>
<h2 id="5-7-메모이제이션-Memoization-패턴"><a href="#5-7-메모이제이션-Memoization-패턴" class="headerlink" title="5.7. 메모이제이션(Memoization) 패턴"></a>5.7. 메모이제이션(Memoization) 패턴</h2><blockquote>
<p>처리 시간이 필요한 작업을 “메모”해 두었다가, 나중에 사용하는 패턴.</p>
</blockquote>
<p>즉, 메모리를 소모하는 대신 속도를 빠르게 하는 방법이라할 수 있다.</p>
<h3 id="캐쉬-구현"><a href="#캐쉬-구현" class="headerlink" title="캐쉬 구현"></a>캐쉬 구현</h3><figure class="highlight javascript"><figcaption><span>Memoization패턴을 이용한 cache 구</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">searchItem</span> (<span class="params">id</span>) </span>&#123; </span><br><span class="line">        <span class="comment">// 이미 캐시에 있는 것이면 그냥 리턴한다.</span></span><br><span class="line">        <span class="keyword">if</span>(searchItem.cache.hasOwnProperty(id)) &#123;</span><br><span class="line">            <span class="keyword">return</span> searchItem.cache[id];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 캐시에 없으면 이 곳에서 http 서버로 부터 받아온다.   </span></span><br><span class="line">    &#125;    </span><br><span class="line">    <span class="comment">// 캐시 저장 공간</span></span><br><span class="line">    searchItem.cache = &#123;&#125;;</span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure>
<h3 id="피보나치-구현"><a href="#피보나치-구현" class="headerlink" title="피보나치 구현"></a>피보나치 구현</h3><p>일반적으로 피보나치는 재귀함수로 구현한다. 아래와 같은 콜 트리가 만들어지게 된다. 하지만, 메모이제이션을 사용하면, 이미 한번 구한 값에 대해서는 또 계산을 하지 않기 때문에 훨씬 빠르다.</p>
<img src="/2017/06/29/Book-Deep-Javascript-5-9/fibonacci.jpg">
<figure class="highlight javascript"><figcaption><span>Memoization패턴을 이용한 fibonacci 구현</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fibonacci = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> memo = [<span class="number">0</span>, <span class="number">1</span>];</span><br><span class="line">  <span class="keyword">var</span> fib = <span class="function"><span class="keyword">function</span> (<span class="params">n</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// 부분 결과를 저장해 둔다.</span></span><br><span class="line">      <span class="keyword">var</span> result = memo[n];</span><br><span class="line">      <span class="comment">// 부분 결과가 없을 때만 다시 호출한다. </span></span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> result !== <span class="string">'number'</span>) &#123;</span><br><span class="line">        result = fib(n - <span class="number">1</span>) + fib(n - <span class="number">2</span>);</span><br><span class="line">        memo[n] = result;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> result;</span><br><span class="line">    &#125;;</span><br><span class="line">  <span class="keyword">return</span> fib;</span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure>
<h3 id="메모이제이션을-위해-프로토타입-사용"><a href="#메모이제이션을-위해-프로토타입-사용" class="headerlink" title="메모이제이션을 위해 프로토타입 사용"></a>메모이제이션을 위해 프로토타입 사용</h3><p>아래와 같이 구현하면 메모이제이션을 일반화할 수 있으며, 그 것을 켜기 위해서 <code>memoize()</code>를 호출한다.</p>
<figure class="highlight javascript"><figcaption><span>Memoization패턴 구현을 위해 포로토타입 사용</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="built_in">Function</span>.prototype.memoize = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 맴버함수 안에서의 this는 그 맴버를 가진 객체이다. 즉, 여기서는 fibonacci 함수.</span></span><br><span class="line">  <span class="comment">// memo는 클로저로 유지되는 변수. 그 안에 파라미터를 인덱스로 하여 부분 결과 데이터를 저장한다.     </span></span><br><span class="line">  <span class="keyword">var</span> _this = <span class="keyword">this</span>,</span><br><span class="line">    memo = &#123;&#125;;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> argsString = <span class="built_in">JSON</span>.stringify(<span class="built_in">arguments</span>),</span><br><span class="line">      returnValue;</span><br><span class="line">    <span class="keyword">if</span> (memo.hasOwnProperty(argsString)) &#123;</span><br><span class="line">      <span class="comment">// 이미 저장한 값이면 바로 리턴.</span></span><br><span class="line">      <span class="keyword">return</span> memo[argsString];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 없는 값이면 fibonacci.apply() 후 저장하고 리턴.</span></span><br><span class="line">      returnValue = _this.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">      memo[argsString] = returnValue;</span><br><span class="line">      <span class="keyword">return</span> returnValue;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fibonacci</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (n === <span class="number">0</span> || n === <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> n;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> fibonacci(n - <span class="number">1</span>) + fibonacci(n - <span class="number">2</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> fibonacciMemo = fibonacci.memoize();</span><br></pre></td></tr></table></figure>
<h2 id="5-8-Self-invoking-constructor-패턴"><a href="#5-8-Self-invoking-constructor-패턴" class="headerlink" title="5.8. Self-invoking constructor 패턴"></a>5.8. Self-invoking constructor 패턴</h2><blockquote>
<p>실수로 new 키워드를 생략하더라도, 그 것을 붙여서 호출해주는 방어적인 패턴</p>
</blockquote>
<p>앞 장에서 확인 했듯이 그냥 호출한 함수와 <code>new</code>의 파라미터로 호출된 함수 안에서 <code>this</code>가 가르키는 것은 다르다. 따라서, 생성자 함수를 <code>new</code> 없이 호출하면 전혀 의도 하지 않은 결과를 얻을 수 있다. 따라서 다음과 같이 내부에서 <code>new</code>를 호출하도록 처리한다. </p>
<figure class="highlight javascript"><figcaption><span>self-invoking constructor pattern</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">Employee</span>(<span class="params">name, manMonth</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!(<span class="keyword">this</span> <span class="keyword">instanceof</span> Employee)) &#123;</span><br><span class="line">      <span class="comment">// new 없이 호출 했을 때의 this는 window이다.</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> Employee(name, manMonth);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// new로 호출 했을 때의 this는 새로 만들어진 객체이다.</span></span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.manMonth = manMonth;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> unikys = Employee(<span class="string">"Unikys"</span>, <span class="number">1</span>),</span><br><span class="line">    world = <span class="keyword">new</span> Employee(<span class="string">"World"</span>, <span class="number">2</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(unikys);</span><br><span class="line">  <span class="built_in">console</span>.log(world);</span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure>
<p><code>new</code> 없이 호출 했을 때, 경고 메세지를 출력해 주면 좋을 것 같다.</p>
<h2 id="5-9-콜백-패턴"><a href="#5-9-콜백-패턴" class="headerlink" title="5.9. 콜백 패턴"></a>5.9. 콜백 패턴</h2><blockquote>
<p>함수의 파라미터로에 해당 함수의 호출이 끝나고 나서 처리할 함수를 넘겨주는 패턴.</p>
</blockquote>
<p>많이 쓰는 패턴으로 설명은 생략한다. 아래는 XMLHttpRequest를 jquery의 ajax함수 처럼 구현한 예제이다.</p>
<figure class="highlight javascript"><figcaption><span>callback</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">ajax</span>(<span class="params">method, url, data, callback</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    xhr.open(method, url);</span><br><span class="line">    xhr.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (xhr.status === <span class="number">200</span>) &#123;</span><br><span class="line">        callback.call(<span class="keyword">this</span>, xhr.responseText);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    xhr.send(data);</span><br><span class="line">  &#125;</span><br><span class="line">  ajax(<span class="string">"POST"</span>, <span class="string">"/login"</span>, <span class="string">"id=hello&amp;password=world"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">responseText</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (responseText === <span class="string">"Success"</span>) &#123;</span><br><span class="line">      alert(<span class="string">"Success to login!"</span>);</span><br><span class="line">      ajax(<span class="string">"GET"</span>, <span class="string">"/userInfo"</span>, <span class="string">"id=hello"</span>, displayUserInfo);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      alert(<span class="string">"Failed to login"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">displayUserInfo</span>(<span class="params">responseText</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">"userInfo"</span>).innerHTML = responseText;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure>
<h2 id="5-10-커링-Currying-패턴"><a href="#5-10-커링-Currying-패턴" class="headerlink" title="5.10. 커링(Currying) 패턴"></a>5.10. 커링(Currying) 패턴</h2><blockquote>
<p>어떤 함수의 파라미터를 일부를 미리 채워두고, 나머지 파라미터만 입력 받는 새로운 함수를 만드는 패턴.</p>
</blockquote>
<p>참고로 커링은 수학자 하스켈 커리(Haskell Curry)로 부터 유래되었다고 한다.</p>
<h4 id="간단한-커링"><a href="#간단한-커링" class="headerlink" title="간단한 커링"></a>간단한 커링</h4><p>흔히 봤던 함수 저너레이터는 커링 패턴이라 볼 수 있다.</p>
<figure class="highlight javascript"><figcaption><span>simple currying</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 원래의 함수</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> x + y;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 커링 함수</span></span><br><span class="line">    <span class="keyword">var</span> makeAdder = <span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">y</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> sum(x, y);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// sum을 커링해서 adderFour가 나왔다.</span></span><br><span class="line">    <span class="keyword">var</span> adderFour = makeAdder(<span class="number">4</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(adderFour(<span class="number">1</span>)); <span class="comment">// === 5</span></span><br><span class="line">    <span class="built_in">console</span>.log(adderFour(<span class="number">5</span>)); <span class="comment">// === 9</span></span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure>
<h4 id="프로토타입을-이용한-일반화"><a href="#프로토타입을-이용한-일반화" class="headerlink" title="프로토타입을 이용한 일반화"></a>프로토타입을 이용한 일반화</h4><figure class="highlight javascript"><figcaption><span>generalization of currying</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 함수의 파라미터를 미리 설졍하는, 즉 currying을 해주는 함수.</span></span><br><span class="line">  <span class="built_in">Function</span>.prototype.curry = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 파타미터가 0이면 그냥 this(원래 함수)를 리턴한다.</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">arguments</span>.length &lt; <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// arguments를 클로저 변수에 함수, 파라미터를 저장한다.</span></span><br><span class="line">    <span class="keyword">var</span> _this = <span class="keyword">this</span>,</span><br><span class="line">      args = <span class="built_in">Array</span>.prototype.slice.apply(<span class="built_in">arguments</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// 저장해둔 파라미터들과 새로 받은 파라미터를 더해서 위에서 저장한 함수를 호출하는 클로저 함수를 리턴한다. </span></span><br><span class="line">      <span class="comment">// 함수를 실행하는게 아니라 리턴한다.</span></span><br><span class="line">      <span class="keyword">return</span> _this.apply(<span class="keyword">this</span>, args.concat(<span class="built_in">Array</span>.prototype.slice.apply(<span class="built_in">arguments</span>)));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 원래의 함수</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 원래의 함수에 커링을 적용한 함수를 리턴 받음.</span></span><br><span class="line">  <span class="keyword">var</span> adderFourCurry = sum.curry(<span class="number">4</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(adderFourCurry(<span class="number">5</span>)); <span class="comment">// === 9</span></span><br><span class="line">  <span class="built_in">console</span>.log(adderFourCurry(<span class="number">10</span>)); <span class="comment">// === 14</span></span><br><span class="line">  <span class="comment">// Function 프로토타입으로 일반화 하였으므로 이것도 가능함.</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">sum4</span>(<span class="params">x, y, z, w</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x + y + z + w;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> adderCurry = sum4.curry(<span class="number">5</span>, <span class="number">1</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(adderCurry(<span class="number">2</span>, <span class="number">3</span>)); <span class="comment">// === 11</span></span><br><span class="line">&#125;());</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="단위-변환-사용"><a href="#단위-변환-사용" class="headerlink" title="단위 변환 사용"></a>단위 변환 사용</h4><p>다음과 같이 단위 변환을 위한 함수를 생성하는 것은 함수 저너레이터의 유용한 예제인듯 하다.</p>
<figure class="highlight javascript"><figcaption><span>unit conversion using currying</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 위 예제와 같은 방법 사용.</span></span><br><span class="line">  <span class="built_in">Function</span>.prototype.curry = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">arguments</span>.length &lt; <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> _this = <span class="keyword">this</span>,</span><br><span class="line">      args = <span class="built_in">Array</span>.prototype.slice.apply(<span class="built_in">arguments</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> _this.apply(<span class="keyword">this</span>, args.concat(<span class="built_in">Array</span>.prototype.slice.apply(<span class="built_in">arguments</span>)));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 유닛 변환에 관한 파라미터들을 받고, 마지막으로 변환을 위한 input을 받는다.</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">unitConvert</span>(<span class="params">fromUnit, toUnit, factor, input</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;input&#125;</span> <span class="subst">$&#123;fromUnit&#125;</span> === <span class="subst">$&#123;(input*factor).toFixed(<span class="number">2</span>)&#125;</span> <span class="subst">$&#123;toUnit&#125;</span>`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 커링을 통해서 앞쪽의 3개의 파라미터를 채운 함수들을 리턴한다.</span></span><br><span class="line">  <span class="keyword">var</span> cm2inch = unitConvert.curry(<span class="string">'cm'</span>, <span class="string">'inch'</span>, <span class="number">0.393701</span>),</span><br><span class="line">    metersquare2pyoung = unitConvert.curry(<span class="string">'m^2'</span>, <span class="string">'pyoung'</span>, <span class="number">0.3025</span>),</span><br><span class="line">    kg2lb = unitConvert.curry(<span class="string">'kg'</span>, <span class="string">'lb'</span>, <span class="number">2.204623</span>),</span><br><span class="line">    kmph2mph = unitConvert.curry(<span class="string">'km/h'</span>, <span class="string">'mph'</span>, <span class="number">0.621371</span>);</span><br><span class="line">  <span class="comment">// 결과.</span></span><br><span class="line">  <span class="built_in">console</span>.log(cm2inch(<span class="number">10</span>)); <span class="comment">// 10 cm === 3.94 inch</span></span><br><span class="line">  <span class="built_in">console</span>.log(metersquare2pyoung(<span class="number">30</span>)); <span class="comment">// 30 m^2 === 9.07 pyoung</span></span><br><span class="line">  <span class="built_in">console</span>.log(kg2lb(<span class="number">50</span>)); <span class="comment">// 50 kg === 110.23 lb</span></span><br><span class="line">  <span class="built_in">console</span>.log(kmph2mph(<span class="number">100</span>)); <span class="comment">// 100 km/h === 62.14 mph</span></span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure>
<h4 id="XMLHttpRequest에-응용"><a href="#XMLHttpRequest에-응용" class="headerlink" title="XMLHttpRequest에 응용"></a>XMLHttpRequest에 응용</h4><p>커링을 이용해서 ajax함수를 get, put, post 등에 맞게 만들어서 사용할 수 있다.</p>
<figure class="highlight javascript"><figcaption><span>unit conversion</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 역시 똑같은 방법.</span></span><br><span class="line">  <span class="built_in">Function</span>.prototype.curry = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">arguments</span>.length &lt; <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">var</span> _this = <span class="keyword">this</span>,</span><br><span class="line">        args = <span class="built_in">Array</span>.prototype.slice.apply(<span class="built_in">arguments</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> _this.apply(<span class="keyword">this</span>, args.concat(<span class="built_in">Array</span>.prototype.slice.apply(<span class="built_in">arguments</span>)));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ajax 함수 가장 앞의 파라미터로 method를 받는다.</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">ajax</span>(<span class="params">method, url, data, callback</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    xhr.open(method, url);</span><br><span class="line">    xhr.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (xhr.status === <span class="number">200</span>) &#123;</span><br><span class="line">        callback.call(<span class="keyword">this</span>, xhr.responseText);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    xhr.send(data);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 특정 method를 가진 ajax함수들을 생성할 수 있다.</span></span><br><span class="line">  <span class="keyword">var</span> ajaxGet = ajax.curry(<span class="string">"GET"</span>),</span><br><span class="line">    ajaxPost = ajax.curry(<span class="string">"POST"</span>),</span><br><span class="line">    ajaxPut = ajax.curry(<span class="string">"PUT"</span>),</span><br><span class="line">    ajaxDelete = ajax.curry(<span class="string">"DELETE"</span>);</span><br><span class="line">  ajaxGet(<span class="string">"/data"</span>, <span class="literal">null</span>, <span class="function"><span class="keyword">function</span>(<span class="params">responseText</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(responseText);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;());    </span><br></pre></td></tr></table></figure>
        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://soopdop.github.io/2017/06/29/Book-Deep-Javascript-5-9/" data-id="cjt3zcaho00572sn2n0dlxhu8" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="http://soopdop.github.io/2017/06/29/Book-Deep-Javascript-5-9/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="http://soopdop.github.io/2017/06/29/Book-Deep-Javascript-5-9/">Comments</a>
    

        </footer>
    </div>
    
</article>



    <article id="blog-Book-Deep-Javascript-4-9" class="article article-type-blog" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/06/29/Book-Deep-Javascript-4-9/">[Book Summary] 속깊은 Javascript 4/9</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/06/29/Book-Deep-Javascript-4-9/">
            <time datetime="2017-06-29T05:35:43.000Z" itemprop="datePublished">2017-06-29</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/programming/">programming</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/javascript-Book-Summary/">javascript, Book Summary</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <img src="/2017/06/29/Book-Deep-Javascript-4-9/cover.jpg"> 
<h1 id="Chapter-4-프로토타입과-객체지향-그리고-상속"><a href="#Chapter-4-프로토타입과-객체지향-그리고-상속" class="headerlink" title="Chapter 4. 프로토타입과 객체지향, 그리고 상속"></a>Chapter 4. 프로토타입과 객체지향, 그리고 상속</h1><h2 id="4-1-프로토타입을-통한-객체지향"><a href="#4-1-프로토타입을-통한-객체지향" class="headerlink" title="4.1. 프로토타입을 통한 객체지향"></a>4.1. 프로토타입을 통한 객체지향</h2><h3 id="4-1-1-프로토타입의-정의"><a href="#4-1-1-프로토타입의-정의" class="headerlink" title="4.1.1. 프로토타입의 정의"></a>4.1.1. 프로토타입의 정의</h3><blockquote>
<p>프로토타입이란 Javascript가 제공하는 객체 지향을 지원하기 위한 방법이다. Java의 상속과는 다르게 동적으로 부모 객체의 수정이 가능하다.</p>
</blockquote>
<h3 id="4-1-2-자바스크립트와-자바의-객체-생성-비교"><a href="#4-1-2-자바스크립트와-자바의-객체-생성-비교" class="headerlink" title="4.1.2. 자바스크립트와 자바의 객체 생성 비교"></a>4.1.2. 자바스크립트와 자바의 객체 생성 비교</h3><figure class="highlight java"><figcaption><span>Java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    String name;</span><br><span class="line">    String blog;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, String blog)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.blog = blog;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>자바와 비슷하지만 자바스크립트는 function으로 선언한다. 단, ECMAScript 6에서는 class 키워드가 추가되었다.<br><figure class="highlight javascript"><figcaption><span>Javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, blog</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.blog = blog;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="4-1-3-this의-이해"><a href="#4-1-3-this의-이해" class="headerlink" title="4.1.3. this의 이해"></a>4.1.3. this의 이해</h3><p>자바스크립트에서의 this 가 무엇을 참조하는지는 <strong>“호출 방법”</strong> 에 따라서 변경이 된다. (스코프가 아님)</p>
<figure class="highlight javascript"><figcaption><span>this in javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, blog</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.blog = blog;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="“일반-함수-내에서의-this는-Window-객체를-참조한다-”"><a href="#“일반-함수-내에서의-this는-Window-객체를-참조한다-”" class="headerlink" title="“일반 함수 내에서의 this는 Window 객체를 참조한다.”"></a>“일반 함수 내에서의 this는 Window 객체를 참조한다.”</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo(); <span class="comment">// Window &#123;...&#125;</span></span><br></pre></td></tr></table></figure>
<h4 id="“맴버-함수-내에서의-this는-해당-함수를-포함하는-객체를-참조한다-”"><a href="#“맴버-함수-내에서의-this는-해당-함수를-포함하는-객체를-참조한다-”" class="headerlink" title="“맴버 함수 내에서의 this는 해당 함수를 포함하는 객체를 참조한다.”"></a>“맴버 함수 내에서의 this는 해당 함수를 포함하는 객체를 참조한다.”</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    foo : <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">obj.foo(); <span class="comment">// Object &#123;...&#125;</span></span><br></pre></td></tr></table></figure>
<h4 id="“call-과-apply-는-첫-번째-파라미터로-this를-넘길-수-있다-”"><a href="#“call-과-apply-는-첫-번째-파라미터로-this를-넘길-수-있다-”" class="headerlink" title="“call()과 apply()는 첫 번째 파라미터로 this를 넘길 수 있다.”"></a>“call()과 apply()는 첫 번째 파라미터로 this를 넘길 수 있다.”</h4><p><code>call()</code>과 <code>apply()</code>를 이용하여 함수를 호출하면, 해당 함수 내에서의 <code>this</code>를 바꿀 수 있다. </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>, <span class="keyword">this</span>.bar);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    bar : <span class="string">"bar"</span></span><br><span class="line">&#125;;</span><br><span class="line">foo.call(obj); <span class="comment">// bar</span></span><br></pre></td></tr></table></figure>
<p>위와 같이 <code>obj</code>객체를 파라미터로 넘겨주어 <code>foo</code> 함수의 실행 컨텍스트를 바꿀 수 있다. <code>call</code>의 파라미터가 없거나, 파라미터로 <code>undefined</code>나 <code>null</code> 을 주면 함수 내부에서의 <code>this</code>는 Window 객체를 가르킨다. 일반적으로 함수에서는 내부적으로 <code>call</code>을 파라미터 없이 호출하게 되고, 그 때의 <code>this</code>는 <code>Window</code> 객체를 가르키게 된다고 한다. <code>call</code>과 <code>apply</code>의 차이는 파라미터를 객체로 줄수 있는지의 차이이다.</p>
<h3 id="4-1-4-new-키워드"><a href="#4-1-4-new-키워드" class="headerlink" title="4.1.4. new 키워드"></a>4.1.4. new 키워드</h3><p><code>new</code> 키워드의 파라미터로 함수를 넘기면, 그 내부 동작이 표준에서 정의한대로 동작하는데 그 표준을 이 책에서 설명한다. 만약 아래의 코드를 <code>new</code>가 아니라 그냥 다음과 같이 호출해 버리면, <code>this</code>가 <code>Window</code>을 참조하기 때문에 글로벌 변수 두개를 생성하는 웃긴 결과가 될것이다.</p>
<figure class="highlight javascript"><figcaption><span>Javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, blog</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.blog = blog;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person(<span class="string">"my name"</span>,<span class="string">"my blog"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.name); <span class="comment">// my name</span></span><br></pre></td></tr></table></figure>
<p>하지만, <code>new Person(&quot;my name&quot;,&quot;my blog&quot;)</code> 으로 호출 함으로써 내부적으로 다음의 절차를 따르게 된다. 책의 설명이 이해가 안되서 직접 찾아 봄. <a href="&quot;http://www.ecma-international.org/ecma-262/5.1/#sec-11.2.2&quot;">참고: ecma-internal</a></p>
<ol>
<li>new는 몇가지 체크 후, 내부 함수인 [[Construct]]를 호출한다.</li>
<li>[[Construct]]는 다음의 절차를 따른다.<ol>
<li>새로운 object인 obj생성한다.</li>
<li>파라미터인 함수 F의 prototype을 obj에 설정한다.</li>
<li>F의 내부 함수인 [[Call]]을 호출 하는데, 이때 obj와 파라미터를 넘겨 obj를 초기화 시킨다. (예제에서의 obj.name와 obj.blog가 셋팅되는 과정)</li>
<li>obj를 리턴한다.</li>
</ol>
</li>
</ol>
<h3 id="4-1-5-프로토타입에-대한-표준-정의"><a href="#4-1-5-프로토타입에-대한-표준-정의" class="headerlink" title="4.1.5. 프로토타입에 대한 표준 정의"></a>4.1.5. 프로토타입에 대한 표준 정의</h3><blockquote>
<p>prototype은 다른 객체들과 공유되는 속성을 제공하는 객체이다. </p>
</blockquote>
<figure class="highlight javascript"><figcaption><span>prototype</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, blog</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.blog = blog;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 프로토타입과 생성자 함수는 서로 링크되어 있다.</span></span><br><span class="line"><span class="built_in">console</span>.log(Person.prototype); <span class="comment">// Object &#123;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(Person.prototype.constructor); <span class="comment">// function Person() &#123;&#125;</span></span><br></pre></td></tr></table></figure>
<p>프로토타입의 정의와 특성에 대해서는 <a href="&quot;http://www.nextree.co.kr/p7323/&quot;">이 곳</a> 에 더 잘나와 있다.</p>
<h3 id="4-1-6-프로토타입의-사용-예"><a href="#4-1-6-프로토타입의-사용-예" class="headerlink" title="4.1.6. 프로토타입의 사용 예"></a>4.1.6. 프로토타입의 사용 예</h3><p>이 장에서는 프로토타입의 실제 동작 방식을 예제로 설명한다.</p>
<h4 id="“객체-생성-후에도-prototype-수정이-가능하다”"><a href="#“객체-생성-후에도-prototype-수정이-가능하다”" class="headerlink" title="“객체 생성 후에도 prototype 수정이 가능하다”"></a>“객체 생성 후에도 prototype 수정이 가능하다”</h4><p>다른 언어를 다루던 사람은 객체를 생성할 때, 객체를 찍어 낸다고 생각하기 때문에 한번 찍어낸 객체는 그대로 동작하야 한다고 믿을 수 있다. prototype과 같은 공유 객체를 생각하기 어려울 것이다. 그러나 자바스크립트에서는 그 이후 prototype을 얼마든지 수정이 가능하고, 그럼 각 객체의 기능에도 영향을 받을 수 있다. </p>
<figure class="highlight javascript"><figcaption><span>use of the prototype</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 생성자 함수</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params">bar</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.bar = bar;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 프로토타입에 함수 추가</span></span><br><span class="line">Foo.prototype.getBar = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.bar;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 객체 생성</span></span><br><span class="line"><span class="keyword">var</span> foo1 = <span class="keyword">new</span> Foo(<span class="string">"bar"</span>);</span><br><span class="line"><span class="keyword">var</span> foo2 = <span class="keyword">new</span> Foo(<span class="string">"bar"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(foo1.getBar()); <span class="comment">// bar</span></span><br><span class="line"><span class="built_in">console</span>.log(foo2.getBar()); <span class="comment">// bar</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 프로토타입 함수 변경</span></span><br><span class="line">Foo.prototype.getBar = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">"new "</span> + <span class="keyword">this</span>.bar;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(foo1.getBar()); <span class="comment">// new bar</span></span><br><span class="line"><span class="built_in">console</span>.log(foo2.getBar()); <span class="comment">// new bar</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 프로토타입에 변수 추가</span></span><br><span class="line">Foo.prototype.abc = <span class="string">"abc"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(foo1.abc); <span class="comment">// abc</span></span><br><span class="line"><span class="built_in">console</span>.log(foo2.abc); <span class="comment">// abc</span></span><br></pre></td></tr></table></figure>
<h3 id="4-1-7-프로토타입과-생성자"><a href="#4-1-7-프로토타입과-생성자" class="headerlink" title="4.1.7. 프로토타입과 생성자"></a>4.1.7. 프로토타입과 생성자</h3><p>이 책에서 가장 난해한 부분 중 하나이다. 용어가 부터가 통일 되지 않는다. “constructor”, “생성자”, “생성자 함수”, “프로토타입의 constructor 속성”, “객체의 constructor 속성”은 모두 잘 구분되어야 하는데 마구 섞어 있다. 나름대로 이해한 바를 정리해 본다.</p>
<h4 id="“function-키워드로-contructor-속성이-만들어-진다-”"><a href="#“function-키워드로-contructor-속성이-만들어-진다-”" class="headerlink" title="“function 키워드로 contructor 속성이 만들어 진다.”"></a>“function 키워드로 contructor 속성이 만들어 진다.”</h4><p>위 예제에서 <code>Foo.protoype.constructor</code>는 <code>funtion Foo</code>에 의해서 만들어진다. 책에서 설명하는 MakeConstructor는 아마도 이 과정일 것이다. 두개의 객체가 생성되는데 하나는 <strong>Foo 함수 객체</strong> 이고 다른 하나는 <strong>Foo의 prototype 객체</strong> 이다. 상호 참조를 가지고 있으므로 접근이 가능하다. </p>
<img src="/2017/06/29/Book-Deep-Javascript-4-9/proto1.png" title="constructor and prototype">
<h4 id="“new-생성자-함수-구문으로-새로운-객체를-만든다-”"><a href="#“new-생성자-함수-구문으로-새로운-객체를-만든다-”" class="headerlink" title="“new + 생성자 함수 구문으로 새로운 객체를 만든다.”"></a>“new + 생성자 함수 구문으로 새로운 객체를 만든다.”</h4><p><code>new Foo()</code>를 이용하면, 맴버 변수들의 초기화를 위해서 생성자 함수를 한번 실행 하고 새로운 객체를 만든다. 새로운 객체는 <code>Foo의 prototype 객체</code>에 대해서 내부링크(implicit prototype link)를 가지게 된다. 그림에서 보이는 <strong>proto</strong>가 그 것이다. <strong>proto</strong> 속성은 만들어진 객체의 내부 속성인 [[Prototype]]에 대한 getter 함수라고 하며, 표준이 아니다. </p>
<p>프로토타입 객체는 다른 프로토타입 객체의 링크를 가지며, <code>Object()</code>이 프로토타입 객체 처럼 최상위에 있는 객체의 내부 프로토타입 링크가 null이다. 이 것을 가르켜 “프로토타입 체인”이라고 한다.  </p>
<img src="/2017/06/29/Book-Deep-Javascript-4-9/proto2.png" title="new object">
<h3 id="4-1-8-객체-내의-속성-탐색-순서"><a href="#4-1-8-객체-내의-속성-탐색-순서" class="headerlink" title="4.1.8. 객체 내의 속성 탐색 순서"></a>4.1.8. 객체 내의 속성 탐색 순서</h3><p>위에서 처럼 new 로 객체가 된 후 그 객체의 속성 중 하나에 접근하면, 프로토타입 체인을 따라가면서 해당 속성이 있는지 검사를 하게 된다. 이 방법으로 프로토타입 객체는 공유 객체가 되는 것이며, 이미 new로 만들어진 객체라 하더라도 프로토타입 객체에 동적으로 추가한 함수나 변수를 사용할 수 있는 것이다.</p>
<h3 id="“for-in을-사용하면-프로토타입-객체에-있는-속성까지-모두-순회-한다-”"><a href="#“for-in을-사용하면-프로토타입-객체에-있는-속성까지-모두-순회-한다-”" class="headerlink" title="“for-in을 사용하면 프로토타입 객체에 있는 속성까지 모두 순회 한다.”"></a>“for-in을 사용하면 프로토타입 객체에 있는 속성까지 모두 순회 한다.”</h3><p>위와 같은 이유로 때문에 for 문 내에 <code>hasOwnProperty()</code> 함수를 사용한다. 이 함수는 특정 속성이 객체 자신의 속성인지 아닌지를 검사해 준다. </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (prop <span class="keyword">in</span> foo) &#123;</span><br><span class="line">    <span class="comment">// 객체의 </span></span><br><span class="line">    <span class="keyword">if</span>(foo.hasOwnProperty(prop)) &#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-1-9-프로토타입의-장단점"><a href="#4-1-9-프로토타입의-장단점" class="headerlink" title="4.1.9. 프로토타입의 장단점"></a>4.1.9. 프로토타입의 장단점</h3><p>프로토타입은 결국 여러 객체 들이 공유하는 것이며, 프로토타입을 사용하지 않고도 객체 내부에 모두 구현이 가능하다. 객체가 많을 경우에는 <strong>“메모리 낭비”</strong> 가 생기게 된다. </p>
<p>하지만, 프로토타입의 사용은 <strong>“탐색 시간의 증가”</strong>를 초래하게 된다. 한두번이야 상관없겠지만, 접근 횟수가 많을 경우에는 많은 시간이 걸릴 수 있다.</p>
<h2 id="4-2-자바스크립트에서의-상속-활용"><a href="#4-2-자바스크립트에서의-상속-활용" class="headerlink" title="4.2. 자바스크립트에서의 상속 활용"></a>4.2. 자바스크립트에서의 상속 활용</h2><p>자바스크립트의 프로토타입을 활용하여 다른 언어처럼 “상속” 구현하기 위한 방법에는 여러가지가 있다. 기존 방법(?)의 문제점과 새로운 방식이 책에서 소개된다.</p>
<h3 id="4-2-1-기존-상속-구현-방법"><a href="#4-2-1-기존-상속-구현-방법" class="headerlink" title="4.2.1. 기존 상속 구현 방법"></a>4.2.1. 기존 상속 구현 방법</h3><h4 id="초창기-자바스크립트의-상속-구현-방법"><a href="#초창기-자바스크립트의-상속-구현-방법" class="headerlink" title="초창기 자바스크립트의 상속 구현 방법"></a>초창기 자바스크립트의 상속 구현 방법</h4><p>초창기 자바스크립트의 상속 구현 방법은 부모 함수 객체에 자식 함수 객체에 필요한 속성만 추가 하여 리턴하는 방식이었다. 하지만 instanceof가 제대로 동작하지 않는 문제가 있었다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Parent</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = <span class="string">"parent"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> obj = <span class="keyword">new</span> Parent();</span><br><span class="line">  <span class="keyword">this</span>.name = <span class="string">"Child"</span>;</span><br><span class="line">  <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> child = <span class="keyword">new</span> Child();</span><br><span class="line"><span class="comment">// instanceof가 제대로 동작하지 않는 문제가 있다.</span></span><br><span class="line"><span class="built_in">console</span>.log(child <span class="keyword">instanceof</span> Child); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(child <span class="keyword">instanceof</span> Parent); <span class="comment">// true</span></span><br></pre></td></tr></table></figure></p>
<h4 id="조금-개선된-상속-구현-방법"><a href="#조금-개선된-상속-구현-방법" class="headerlink" title="조금 개선된 상속 구현 방법"></a>조금 개선된 상속 구현 방법</h4><p>다음 코드와 같이 자식 함수의 프로토타입 객체를 Parent()로 생성된 객체로 넣으면 <code>instanceof</code> 가 제대로 동작한다. 그러나 <code>constructor</code>의 링크가 깨지는 문제가 발생한다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Parent</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = <span class="string">"parent"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = <span class="string">"Child"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 이렇게 생성된 Parent 객체를 Child의 prototype 객체로 만드는 방식이었다. </span></span><br><span class="line">Child.prototype = <span class="keyword">new</span> Parent();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 마침내 instanceof 가 잘 동작한다.</span></span><br><span class="line"><span class="keyword">var</span> child = <span class="keyword">new</span> Child();</span><br><span class="line"><span class="built_in">console</span>.log(child <span class="keyword">instanceof</span> Child); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(child <span class="keyword">instanceof</span> Parent); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 하지만 생성자 함수가 Parent()로 바뀌는 문제가 존재한다..</span></span><br><span class="line"><span class="built_in">console</span>.log(child.constructor); <span class="comment">// function Parent()</span></span><br></pre></td></tr></table></figure>
<p>내부의 링크가 깨진다던지 하는 문제가 발생한다. 또한 <code>new</code> 키워드 자체가 자바스크립트 답지 않다는 주장이 많이 반영되어 <code>Object.create</code> 함수를 만들어 내게 된다.</p>
<h3 id="4-2-2-instanceof-동작-원리"><a href="#4-2-2-instanceof-동작-원리" class="headerlink" title="4.2.2. instanceof 동작 원리"></a>4.2.2. instanceof 동작 원리</h3><p>이 책에서는 길게 설명하고 있지만, 구글링을 통해 찾은 것은 간단하다. 좌측 객체의 포로토타입이 우측 객체의 프로토타입 체인에 속해 있는지 검색해보는 것이다.</p>
<h3 id="4-2-3-Object-create-함수"><a href="#4-2-3-Object-create-함수" class="headerlink" title="4.2.3. Object.create 함수"></a>4.2.3. Object.create 함수</h3><p>IE9 이상부터 지원되는 함수이며, 더글라스 크락포드가 주장한 이 함수의 기본 형태는 다음과 같다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.create = <span class="function"><span class="keyword">function</span>(<span class="params">o</span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">    F.prototype = o;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> F();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>o</code>를 통해서 생성할 객체의 prototype을 받아서 새로 만든 함수의 prototype으로 설정한다. </p>
<h3 id="4-2-6-Object-create와-new-키워드의-조합"><a href="#4-2-6-Object-create와-new-키워드의-조합" class="headerlink" title="4.2.6. Object.create와 new 키워드의 조합"></a>4.2.6. Object.create와 new 키워드의 조합</h3><p>둘의 조합으로 드디어 원하는 상속이 가능하게 된다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Parent</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = <span class="string">"parent"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = <span class="string">"Child"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Child 함수 객체의 prototype 을 직접 만들어 준다.</span></span><br><span class="line"><span class="comment">// 리턴된 함수는 constructor 속성으로 Child 함수를 가지고,</span></span><br><span class="line"><span class="comment">// prototype 속성으로 Parent 함수의 prototype을 가진다.</span></span><br><span class="line">Child.prototype = <span class="built_in">Object</span>.create(Parent.prototype, &#123;</span><br><span class="line">  <span class="keyword">constructor</span>: &#123;</span><br><span class="line">    value: Child</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 마침내 instanceof 가 잘 동작한다.</span></span><br><span class="line"><span class="keyword">var</span> child = <span class="keyword">new</span> Child();</span><br><span class="line"><span class="built_in">console</span>.log(child <span class="keyword">instanceof</span> Child); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(child <span class="keyword">instanceof</span> Parent); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 생성자 함수도 잘 연결되어 있다.</span></span><br><span class="line"><span class="built_in">console</span>.log(child.constructor); <span class="comment">// function Child()</span></span><br></pre></td></tr></table></figure>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://soopdop.github.io/2017/06/29/Book-Deep-Javascript-4-9/" data-id="cjt3zcahs005a2sn2169deshs" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="http://soopdop.github.io/2017/06/29/Book-Deep-Javascript-4-9/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="http://soopdop.github.io/2017/06/29/Book-Deep-Javascript-4-9/">Comments</a>
    

        </footer>
    </div>
    
</article>



    <article id="post-Book-Deep-Javascript-3-9" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/06/27/Book-Deep-Javascript-3-9/">[Book Summary] 속 깊은 Javascript 3/9</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/06/27/Book-Deep-Javascript-3-9/">
            <time datetime="2017-06-27T06:57:44.000Z" itemprop="datePublished">2017-06-27</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/programming/">programming</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/javascript-Book-Summary/">javascript, Book Summary</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <img src="/2017/06/27/Book-Deep-Javascript-3-9/cover.jpg"> 
<h1 id="Chapter-3-자바-스크립트의-변수"><a href="#Chapter-3-자바-스크립트의-변수" class="headerlink" title="Chapter 3. 자바 스크립트의 변수"></a>Chapter 3. 자바 스크립트의 변수</h1><h2 id="3-1-자바스크립트의-기본-형과-typeof"><a href="#3-1-자바스크립트의-기본-형과-typeof" class="headerlink" title="3.1. 자바스크립트의 기본 형과 typeof"></a>3.1. 자바스크립트의 기본 형과 typeof</h2><h3 id="javascript의-기본형"><a href="#javascript의-기본형" class="headerlink" title="javascript의 기본형"></a>javascript의 기본형</h3><p>객체가 아닌 기본적인 키워드로 활용할 수 있는 기본형. </p>
<ul>
<li>number</li>
<li>string</li>
<li>boolean</li>
<li>undefined</li>
<li>null</li>
<li>symbol</li>
</ul>
<h3 id="typeof의-결과-목록"><a href="#typeof의-결과-목록" class="headerlink" title="typeof의 결과 목록"></a>typeof의 결과 목록</h3><p>typeof는 문자열을 반환한다.</p>
<ul>
<li>“undefined”</li>
<li>“boolean”</li>
<li>“number”</li>
<li>“string”</li>
<li>“object”</li>
<li>“function”</li>
<li>“symbol”</li>
</ul>
<h3 id="typeof의-결과-중-특이-한-것"><a href="#typeof의-결과-중-특이-한-것" class="headerlink" title="typeof의 결과 중 특이 한 것"></a>typeof의 결과 중 특이 한 것</h3><p><strong>“typeof null은 object이다.”</strong> 따라서, typeof를 이용해서 object인지 체크한 뒤 어떤 동작을 추가하려면, null 체크를 따로 먼저 해주는 것이 좋다.<br><figure class="highlight javascript"><figcaption><span>object vs function</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(aaa !== <span class="literal">null</span> &amp;&amp; <span class="keyword">typeof</span> aaa === <span class="string">"object"</span>) &#123;</span><br><span class="line">    <span class="comment">// do something with aaa</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="3-2-new-String-“”-String-“”-그리고-“”"><a href="#3-2-new-String-“”-String-“”-그리고-“”" class="headerlink" title="3.2. new String(“”), String(“”), 그리고 “”"></a>3.2. new String(“”), String(“”), 그리고 “”</h2><p>Javascript의 문자열은 기본형(primitive)과 객체형 두가지 형태로 존재한다. </p>
<h3 id="“new-String-은-래퍼객체이고-“”과-String-“”-은-기본형이다-”"><a href="#“new-String-은-래퍼객체이고-“”과-String-“”-은-기본형이다-”" class="headerlink" title="“new String()은 래퍼객체이고, “”과 String(“”)은 기본형이다.”"></a>“new String()은 래퍼객체이고, “”과 String(“”)은 기본형이다.”</h3><p>String(“”)은 표준에 정의된 일련의 과정을 통해서 결국 기본형을 리턴한다. </p>
<figure class="highlight javascript"><figcaption><span>new String('') vs '' vs String('')</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">"abc"</span>)); <span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">String</span>(<span class="string">"abc"</span>)); <span class="comment">// string</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="string">"abc"</span>); <span class="comment">// string</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"abc"</span> === <span class="built_in">String</span>(<span class="string">"abc"</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<h3 id="“기본형은-레퍼객체나-Object의-인스턴스가-아니다-”"><a href="#“기본형은-레퍼객체나-Object의-인스턴스가-아니다-”" class="headerlink" title="“기본형은 레퍼객체나 Object의 인스턴스가 아니다.”"></a>“기본형은 레퍼객체나 Object의 인스턴스가 아니다.”</h3><figure class="highlight javascript"><figcaption><span>instanceof primitive type</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">123</span> <span class="keyword">instanceof</span> <span class="built_in">Number</span>); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">123</span> <span class="keyword">instanceof</span> <span class="built_in">Object</span>); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">Number</span>(<span class="number">123</span>) <span class="keyword">instanceof</span> <span class="built_in">Number</span>); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">Number</span>(<span class="number">123</span>) <span class="keyword">instanceof</span> <span class="built_in">Object</span>); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"123"</span> <span class="keyword">instanceof</span> <span class="built_in">Number</span>); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"123"</span> <span class="keyword">instanceof</span> <span class="built_in">Object</span>); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">"123"</span>) <span class="keyword">instanceof</span> <span class="built_in">String</span>); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">"123"</span>) <span class="keyword">instanceof</span> <span class="built_in">Object</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<h3 id="“기본형에는-속성을-추가할-수-없다-”"><a href="#“기본형에는-속성을-추가할-수-없다-”" class="headerlink" title="“기본형에는 속성을 추가할 수 없다.”"></a>“기본형에는 속성을 추가할 수 없다.”</h3><p>정확히 말하자면, 기본형의 프로퍼티 접근시 내부적으로 new String(“”)으로 레퍼객체를 만들었다가 바로 사라지기 때문인데, 이 책에서는 그러한 설명이 없다. 설명은 이곳 : <a href="http://noritersand.tistory.com/536" target="_blank" rel="noopener">래퍼 객체</a></p>
<figure class="highlight javascript"><figcaption><span>래퍼 객체</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> test = <span class="string">"test"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(test.length); <span class="comment">// new String(test).length와 같다.</span></span><br><span class="line">test.abc = <span class="string">"abc"</span>; <span class="comment">// new String(test).abc = "abc"와 같다.</span></span><br><span class="line"><span class="built_in">console</span>.log(test.abc) <span class="comment">// undefined 있을리 없음.</span></span><br></pre></td></tr></table></figure>
<h3 id="“String-prototype에-함수를-추가하면-기본형에서도-그-함수를-쓸-수-있다-”"><a href="#“String-prototype에-함수를-추가하면-기본형에서도-그-함수를-쓸-수-있다-”" class="headerlink" title="“String.prototype에 함수를 추가하면 기본형에서도 그 함수를 쓸 수 있다.”"></a>“String.prototype에 함수를 추가하면 기본형에서도 그 함수를 쓸 수 있다.”</h3><p>이 또한 프로퍼티 접근시 래퍼 객체를 생성해서 호출하기 때문에 가능한 것이다.</p>
<figure class="highlight javascript"><figcaption><span>String.prototype에 함수 추가</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>.prototype.getLength = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.length;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> test = <span class="string">"test"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(test.getLength()); <span class="comment">// new String(test).getLength()와 같다.</span></span><br></pre></td></tr></table></figure>
<h2 id="3-3-글로벌-변수"><a href="#3-3-글로벌-변수" class="headerlink" title="3.3. 글로벌 변수"></a>3.3. 글로벌 변수</h2><p>많은 자바스크립트 개발자가 글로벌 변수를 사용한다. 아무 생각 없이 변수를 사용했다면 글로벌 변수이다.</p>
<h3 id="글로벌-변수를-자제-해야-하는-이유"><a href="#글로벌-변수를-자제-해야-하는-이유" class="headerlink" title="글로벌 변수를 자제 해야 하는 이유"></a>글로벌 변수를 자제 해야 하는 이유</h3><ul>
<li>소스를 나눠서 관리할 때 각 소스 끼리 충돌 발생 가능성. <ul>
<li>예: xhr = new XMLHttpRequest()가 여러 소스에 있을 경우</li>
</ul>
</li>
<li>서버의 응답을 기다리는 등의 비동기식 처리 시 문제 발생 가능성.<ul>
<li>예: xhr을 공유하거나 겹치게 사용하는 경우, 여러 곳에서 다른 xhr.onreadystatechange를 등록하게 되고, 응답이 오기전에 두 번 이상의 요청을 보낸 경우 앞의 응답이 온 것에 대해서 처리하지 못하게 된다.</li>
</ul>
</li>
<li>메모리 관리 차원에서<ul>
<li>변수들의 레퍼런스 카운터가 0가 되지 않는 이상 가비지 컬렉터가 메모리를 해제하지 않으므로, 잠시 사용할 변수는 로컬 변수로 선언하는 것이 옳다. </li>
</ul>
</li>
</ul>
<h2 id="3-4-글로벌-변수-정의"><a href="#3-4-글로벌-변수-정의" class="headerlink" title="3.4. 글로벌 변수 정의"></a>3.4. 글로벌 변수 정의</h2><h3 id="글로벌-변수-정의-방법"><a href="#글로벌-변수-정의-방법" class="headerlink" title="글로벌 변수 정의 방법"></a>글로벌 변수 정의 방법</h3><ol>
<li><code>&lt;script&gt;</code> 안에 <code>var</code> 로 선언한다.</li>
<li>모든 곳에서 <code>var</code> 없이 선언한다.<ul>
<li>단, 이 경우 상위 scope를 탐색 해 본 후 없으면 글로벌 변수가 된다.</li>
</ul>
</li>
<li><code>for</code>문에서 <code>i</code>를 잘못 사용하면 오동작의 원인이 된다.</li>
</ol>
<h2 id="3-5-Window-객체"><a href="#3-5-Window-객체" class="headerlink" title="3.5. Window 객체"></a>3.5. Window 객체</h2><p>글로벌 영역을 관장하는 “The Global Object”이다. 이 객체는 브라우저가 제공하며 약간 특수한 성질을 가지고 있다. </p>
<ul>
<li>new 로 생성할 수 없다.</li>
<li>함수로 호출할 수 없다.</li>
<li>프로토타입이 없다.</li>
</ul>
<h4 id="“window는-window-window-window이다-”"><a href="#“window는-window-window-window이다-”" class="headerlink" title="“window는 window.window.window이다.”"></a>“window는 window.window.window이다.”</h4><p>window는 재귀적인 형태를 가지고 있다.<br><figure class="highlight javascript"><figcaption><span>window.window</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span> === <span class="built_in">window</span>.window); <span class="comment">// true</span></span><br></pre></td></tr></table></figure></p>
<h4 id="“글로벌-변수에-프로퍼티로-접근이-가능하다-”"><a href="#“글로벌-변수에-프로퍼티로-접근이-가능하다-”" class="headerlink" title="“글로벌 변수에 프로퍼티로 접근이 가능하다.”"></a>“글로벌 변수에 프로퍼티로 접근이 가능하다.”</h4><figure class="highlight javascript"><figcaption><span>the way to access global variables</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.a); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<h4 id="“글로벌-변수에-이름으로-접근도-가능하다-”"><a href="#“글로벌-변수에-이름으로-접근도-가능하다-”" class="headerlink" title="“글로벌 변수에 이름으로 접근도 가능하다.”"></a>“글로벌 변수에 이름으로 접근도 가능하다.”</h4><figure class="highlight javascript"><figcaption><span>the way to access global variables</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a1 = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> a2 = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">var</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>[<span class="string">"a"</span> + ++i]); <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>[<span class="string">"a"</span> + ++i]); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>
<h4 id="“글로벌-함수-호출도-같은-방법으로-가능하다-”"><a href="#“글로벌-함수-호출도-같은-방법으로-가능하다-”" class="headerlink" title="“글로벌 함수 호출도 같은 방법으로 가능하다.”"></a>“글로벌 함수 호출도 같은 방법으로 가능하다.”</h4><figure class="highlight javascript"><figcaption><span>the way to call global functions</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"foo"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>[<span class="string">"foo"</span>]()); <span class="comment">// foo</span></span><br></pre></td></tr></table></figure>
<h2 id="3-6-글로벌-변수-선언-방법과-차이"><a href="#3-6-글로벌-변수-선언-방법과-차이" class="headerlink" title="3.6. 글로벌 변수 선언 방법과 차이"></a>3.6. 글로벌 변수 선언 방법과 차이</h2><p>글로벌 변수를 선언하는데는 몇가지 방법이 있다.</p>
<ol>
<li>글로벌 스코프에서 var 키워드를 이용한 선언.</li>
<li>특정 스코프에서 상위 스코프에 선언되지 않은 변수를 var 선언.</li>
<li>window 객체에 속성 추가.</li>
</ol>
<h3 id="“Hoisting”"><a href="#“Hoisting”" class="headerlink" title="“Hoisting”"></a>“Hoisting”</h3><p>이 책에서 사용한 용어는 아니지만, 자바스크립트는 변수와 함수의 선언을 hoisting(끌어올림) 한다. 즉, 아래 쪽에 선언한 변수와 함수를 위에서 접근할 수 있다는 뜻이다.</p>
<figure class="highlight javascript"><figcaption><span>Hoisting</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">foo();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(bar); <span class="comment">// undefined</span></span><br><span class="line">    bar = <span class="string">"bar"</span>; <span class="comment">// 지역 변수의 할당, 전역 변수의 선언이 아니다.</span></span><br><span class="line">    <span class="built_in">console</span>.log(bar); <span class="comment">// bar</span></span><br><span class="line">    <span class="keyword">var</span> bar; <span class="comment">// declaration here.</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(bar); <span class="comment">// error!</span></span><br></pre></td></tr></table></figure>
<h2 id="3-7-var-키워드의-효율적인-사용"><a href="#3-7-var-키워드의-효율적인-사용" class="headerlink" title="3.7. var 키워드의 효율적인 사용"></a>3.7. var 키워드의 효율적인 사용</h2><p>JSLint는 항상 다음을 권하는 메세지를 출력한다. </p>
<blockquote>
<p>“모든 변수는 함수의 위쪽에 묶어서 선언해야 한다.”</p>
</blockquote>
<p>이렇게 하는 것에는 몇가지 이유가 있다.</p>
<h3 id="“초기화-실수의-최소화하기-위해서”"><a href="#“초기화-실수의-최소화하기-위해서”" class="headerlink" title="“초기화 실수의 최소화하기 위해서”"></a>“초기화 실수의 최소화하기 위해서”</h3><p>이 책에 나오는 이유는 그다지 명확하지가 않다. 내 생각은 다음과 같다. “선언되지 않은 변수”와 “초기화 되지 않은 변수”는 모두 <code>typeof</code>의 결과로 <code>undefined</code>를 리턴한다. 우리는 때로 이것을 구분해야할 필요가 있다. 소스가 길어지면 “어딘가”에 선언되어 있을지도 모르는 변수를 재선언을 하는 등의 문제를 만들 수 있기 때문이다.</p>
<h3 id="“변수-관리를-잘-하기-위해서”"><a href="#“변수-관리를-잘-하기-위해서”" class="headerlink" title="“변수 관리를 잘 하기 위해서”"></a>“변수 관리를 잘 하기 위해서”</h3><p>책보다 설명을 잘 할 수 있을 듯 하다. Javascript는 nested 함수를 지원하는데, 변수를 var 없이 할당하면 글로벌 변수가 만들어 지거나 이전 스코프의 변수를 변경하게 된다. 게다가 hoisting까지 지원하기 때문에 변수를 잘 관리 하지 않으면 버그를 만들어 내기 매우 쉬운 환경이다. 따라서 모든 함수의 도입부에 로컬 변수를 잘 선언해 이러한 혼란을 막는데 도움을 줄 수 있다.</p>
<h3 id="“Minifying이-잘-되도록”"><a href="#“Minifying이-잘-되도록”" class="headerlink" title="“Minifying이 잘 되도록”"></a>“Minifying이 잘 되도록”</h3><p>minifying할 때 소스의 부피를 더 줄일 수 있다 한다.</p>
<h2 id="3-8-글로벌-변수-최소화하기"><a href="#3-8-글로벌-변수-최소화하기" class="headerlink" title="3.8. 글로벌 변수 최소화하기"></a>3.8. 글로벌 변수 최소화하기</h2><p>다음과 같은 두가지 방법으로 글로벌 변수를 회피할 수 있다.</p>
<ol>
<li>클로저 사용하기</li>
<li>모듈/네임스페이스 패턴 사용하기<ul>
<li>Jquery의 $처럼, window.$에 모든 것을 넣어 모듈 처럼 이용하는 방법</li>
</ul>
</li>
</ol>
<h2 id="3-9-변수-사용-방법과-성능"><a href="#3-9-변수-사용-방법과-성능" class="headerlink" title="3.9. 변수 사용 방법과 성능"></a>3.9. 변수 사용 방법과 성능</h2><p><strong>외부 스코프의 변수를 그대로 사용하는 것이 아니라, 지역변수로 한번 참조한 뒤 그 지역변수를 사용하는 것이 성능에 도움이 된다.</strong> 현재의 스코프에 어떤 변수가 없을 때마다, 재귀적으로 상위 스코프로 탐색을 실시하게 되기 때문이다.  </p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://soopdop.github.io/2017/06/27/Book-Deep-Javascript-3-9/" data-id="cjt3zcahh00532sn2f197ylvu" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="http://soopdop.github.io/2017/06/27/Book-Deep-Javascript-3-9/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="http://soopdop.github.io/2017/06/27/Book-Deep-Javascript-3-9/">Comments</a>
    

        </footer>
    </div>
    
</article>



    <article id="post-Book-Deep-Javascript-2-9" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/06/26/Book-Deep-Javascript-2-9/">[Book Summary] 속깊은 Javascript 2/9</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/06/26/Book-Deep-Javascript-2-9/">
            <time datetime="2017-06-26T06:10:24.000Z" itemprop="datePublished">2017-06-26</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/programming/">programming</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/javascript-Book-Summary/">javascript, Book Summary</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <img src="/2017/06/26/Book-Deep-Javascript-2-9/cover.jpg"> 
<h1 id="Chapter-2-자바스크립트의-스코프와-클로저"><a href="#Chapter-2-자바스크립트의-스코프와-클로저" class="headerlink" title="Chapter 2. 자바스크립트의 스코프와 클로저"></a>Chapter 2. 자바스크립트의 스코프와 클로저</h1><h2 id="2-1-스코프란"><a href="#2-1-스코프란" class="headerlink" title="2.1. 스코프란?"></a>2.1. 스코프란?</h2><p>다른 프로그래밍 언어를 다루다가 자바 스크립트를 접하게 된 프로그래머가 반드시 한번 빠지게 되는 함정.<br><blockquote><p>자바 스크립트는 일반적인 프로그래밍 언어의 블록 스코프를 따르지 않는다. </p>
</blockquote></p>
<h3 id="2-1-1-스코프의-생성"><a href="#2-1-1-스코프의-생성" class="headerlink" title="2.1.1. 스코프의 생성"></a>2.1.1. 스코프의 생성</h3><p>자바 스크립트에서 스코프를 생성하는 구문은 세가지가 있다.</p>
<h4 id="function을-이용한-스코프-생성"><a href="#function을-이용한-스코프-생성" class="headerlink" title="function을 이용한 스코프 생성"></a>function을 이용한 스코프 생성</h4><p>foo() 내부에서 선언된 변수를 외부에서 접근할 수 없다.<br><figure class="highlight javascript"><figcaption><span>function을 이용한 scope 생성</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> b = <span class="string">"Can you access me?"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(type <span class="keyword">of</span> b); <span class="comment">//"undefined"</span></span><br></pre></td></tr></table></figure></p>
<h4 id="catch을-이용한-스코프-생성"><a href="#catch을-이용한-스코프-생성" class="headerlink" title="catch을 이용한 스코프 생성"></a>catch을 이용한 스코프 생성</h4><p>catch의 인자(이 경우에는 err)만 내부 스코프에 포함 된다. 선언된 변수(이 경우에는 test)는 외부 스코프에 포함된다. </p>
<figure class="highlight javascript"><figcaption><span>catch를 이용한 scope 생성</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> exception(<span class="string">"fake exception"</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="keyword">var</span> test = <span class="string">"can you see me?"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(type <span class="keyword">of</span> err); <span class="comment">// "undefined"</span></span><br><span class="line"><span class="built_in">console</span>.log(test); <span class="comment">// "can you see me?"</span></span><br></pre></td></tr></table></figure>
<h4 id="with을-이용한-스코프-생성"><a href="#with을-이용한-스코프-생성" class="headerlink" title="with을 이용한 스코프 생성"></a>with을 이용한 스코프 생성</h4><p>with 구문도 catch 처럼 인자가 내부 스코프에 포함 된다. </p>
<figure class="highlight javascript"><figcaption><span>with를 이용한 scope 생성</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span>(&#123;<span class="attr">A</span>: <span class="string">"You can't see me"</span>&#125;) &#123;</span><br><span class="line">    <span class="keyword">var</span> B = <span class="string">"but you can see me"</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(A); <span class="comment">// "You can't see me"</span></span><br><span class="line">    <span class="built_in">console</span>.log(B); <span class="comment">// "but you can see me"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(B); <span class="comment">// "but you can see me"</span></span><br><span class="line"><span class="built_in">console</span>.log(A); <span class="comment">// error!!</span></span><br></pre></td></tr></table></figure>
<h3 id="2-1-2-스코프의-지속성"><a href="#2-1-2-스코프의-지속성" class="headerlink" title="2.1.2. 스코프의 지속성"></a>2.1.2. 스코프의 지속성</h3><p>다른 언어와 다른 JavaScript 만의 강점 중 하나는, 스코프가 지속 된다는 점이다. 함수가 선언된 곳이 아닌 전혀 다른 곳에서 함수가 호출될 수 있어서, 해당 함수가 참조하는 스코프를 지속할 필요가 있다.</p>
<h3 id="2-1-3-with-구문"><a href="#2-1-3-with-구문" class="headerlink" title="2.1.3. with 구문"></a>2.1.3. with 구문</h3><p>with 구문은 파라미터로 받은 객체를 스코프 체인에 추가하여 동작한다. 즉, 해당 오브젝트는 블록 안에서 사용되는 변수에 대한 탐색의 대상이 되는 상위 스코프로 추가되는 것이다.</p>
<figure class="highlight javascript"><figcaption><span>with 의 기본 사용법</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> user = &#123;</span><br><span class="line">    name : <span class="string">"sd"</span>,</span><br><span class="line">    age : <span class="string">"20"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span>(user) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(name, age); <span class="comment">// sd 20</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-1-4-with를-사용하지-말아야하는-이유"><a href="#2-1-4-with를-사용하지-말아야하는-이유" class="headerlink" title="2.1.4. with를 사용하지 말아야하는 이유"></a>2.1.4. with를 사용하지 말아야하는 이유</h3><h4 id="첫번째-with를-사용한-코드는-모호성을-가진다"><a href="#첫번째-with를-사용한-코드는-모호성을-가진다" class="headerlink" title="첫번째, with를 사용한 코드는 모호성을 가진다."></a>첫번째, with를 사용한 코드는 모호성을 가진다.</h4><p>다음 소스에서 value가 인자의 value인지, obj.value를 의도한 것인지 모호하다.</p>
<figure class="highlight javascript"><figcaption><span>with 구문의 모호성</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">something</span>(<span class="params">value, obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">with</span>(obj) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(value); <span class="comment">// value?? obj.value??</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="두번째-with는-표준에서의-제외된다"><a href="#두번째-with는-표준에서의-제외된다" class="headerlink" title="두번째, with는 표준에서의 제외된다."></a>두번째, with는 표준에서의 제외된다.</h4><p>위와 같음 모호성으로 인하여 with문 사용을 자제 하라고 권하고 있으며, ECMAScript 6에서는 deprecated될 예정이다.</p>
<h4 id="세번째-with의-대상-객체는-속성을-추가-할-수-없다"><a href="#세번째-with의-대상-객체는-속성을-추가-할-수-없다" class="headerlink" title="세번째, with의 대상 객체는 속성을 추가 할 수 없다."></a>세번째, with의 대상 객체는 속성을 추가 할 수 없다.</h4><p>with에 style 객체를 사용할 경우, 새로운 속성을 추가할 수 없다.</p>
<figure class="highlight javascript"><figcaption><span>style 추가 불가</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> (<span class="built_in">document</span>.getElementById(<span class="string">"myDiv"</span>).style) &#123;</span><br><span class="line">    background = <span class="string">"yellow"</span>; <span class="comment">// 이미 존재하는 속성인 경우 OK.</span></span><br><span class="line">    border = <span class="string">"1px soild black"</span>; <span class="comment">// border 속성을 새로 추가하려고 의도한 경우, global 변수로 선언되어 버린다.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-2-클로저란"><a href="#2-2-클로저란" class="headerlink" title="2.2. 클로저란?"></a>2.2. 클로저란?</h2><p>이 책에서는 클로저를 다음과 같이 정의한다.</p>
<blockquote>
<p>“특정 함수가 참조하는 변수들이 선언된 lexical scope는 계속 유지되는데, 그 함수와 스코프를 묶어서 클로저라고 한다.”</p>
</blockquote>
<p>사실 좀 와닿지 않고, 이해하기 어렵다. 그래서 다른 곳에서 정의를 찾아 보았다. <a href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Guide/Closures" target="_blank" rel="noopener">MDN 문서</a>는 다음과 같이 정의한다. </p>
<blockquote>
<p>“클로저는 독립적인 (자유) 변수 (지역적으로 사용되지만, 둘러싼 범위 안에서 정의된 변수)를 참조하는 함수들이다. 다른 말로 하면, 이 함수들은 그들이 생성된 환경을 ‘기억’한다.”</p>
</blockquote>
<p>쉽게 말해서, 클로저는 함수와 함수가 선언된 문법적 환경의 조합이라 할 수 있다.  </p>
<figure class="highlight javascript"><figcaption><span>가장 간단한 closure 예제</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">counterGenerator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ++count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> counterA = counterGenerator();</span><br><span class="line"><span class="keyword">var</span> counterB = counterGenerator();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(counterA()); <span class="comment">// 1;</span></span><br><span class="line"><span class="built_in">console</span>.log(counterA()); <span class="comment">// 2;</span></span><br><span class="line"><span class="built_in">console</span>.log(counterB()); <span class="comment">// 1;</span></span><br><span class="line"><span class="built_in">console</span>.log(counterB()); <span class="comment">// 2;</span></span><br></pre></td></tr></table></figure>
<p>위의 예제에서 count 변수의 참조는 리턴된 익명함수 내에서 계속 유지된다. 즉 count 값을 증가 시킬 수 있고, 리턴 받아서 출력해볼 수도 있다.</p>
<h3 id="2-2-1-클로저-쉽게-이해하기"><a href="#2-2-1-클로저-쉽게-이해하기" class="headerlink" title="2.2.1. 클로저 쉽게 이해하기"></a>2.2.1. 클로저 쉽게 이해하기</h3><h4 id="개인적인-조사-새로운-스코프는-“선언”-시에-생성-되는-것인가-“실행”-시에-생성되는-것인가"><a href="#개인적인-조사-새로운-스코프는-“선언”-시에-생성-되는-것인가-“실행”-시에-생성되는-것인가" class="headerlink" title="[개인적인 조사] 새로운 스코프는 “선언” 시에 생성 되는 것인가? “실행” 시에 생성되는 것인가?"></a>[개인적인 조사] 새로운 스코프는 “선언” 시에 생성 되는 것인가? “실행” 시에 생성되는 것인가?</h4><p>Javascript는 Lexical Scope를 이용한다. 이 것의 의미를 정확하게 파악할 필요가 있다. 자세한 것은 <a href="https://github.com/getify/You-Dont-Know-JS" target="_blank" rel="noopener">“You don’t know JS”</a>를 참고하고, 번역판도 훑어볼 예정.</p>
<h5 id="a-Lexing"><a href="#a-Lexing" class="headerlink" title="a. Lexing"></a>a. Lexing</h5><p>전통적인 컴파일러는 다음의 세가지 과정을 거쳐 코드를 실행가능한 코드로 바꾼다. <strong>lexing -&gt; parsing -&gt; code-generation</strong>. Lexing이란 string으로 되어있는 코드를 의미 있는 단위로 tokenizing하는 것을 뜻한다. </p>
<h5 id="b-Lexical-Scope"><a href="#b-Lexical-Scope" class="headerlink" title="b. Lexical Scope"></a>b. Lexical Scope</h5><p>lexical scope라는 것은 lex-time에 정의되는 Scope를 뜻한다. lex-time이란 위에서 말한 lexing 과정을 말하는 것이다. 즉, 어떤 모양의 Scope chain을 가질지 이 때 결정되는 것이다. static scope와 같은 말이며, 반대 되는 개념으로는 dynamic scope가 있다. </p>
<h5 id="c-Scope-Chain"><a href="#c-Scope-Chain" class="headerlink" title="c. Scope Chain"></a>c. Scope Chain</h5><p>엔진이 코드를 실행 시, 어디서 변수를 찾을지를 말해주는 정보이다. <a href="https://github.com/getify/You-Dont-Know-JS" target="_blank" rel="noopener">“You don’t know JS”</a>에 따르면, 변수를 어디에 저장하고 어디서 찾을 것인가에 대한 룰의 집합이라고 한다.   </p>
<p>Javascript는 function기반으로 scope를 생성하므로, global scope 를 base로 하여 function과 nested function이 선언될 때마다 하위 Scope를 만들게 된다. 즉, 다음의 코드에서 scope는 3단계가 되며, <code>console.log</code>에서 변수 <code>a</code>를 찾기 위해서 3번의 탐색을 거치게 된다. </p>
<ol>
<li>global scope</li>
<li>foo() scope</li>
<li>bar() scope</li>
</ol>
<figure class="highlight javascript"><figcaption><span>가장 간단한 closure 예제</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">b</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> c = b * <span class="number">2</span>;</span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(a, b, c, d);</span><br><span class="line">		<span class="keyword">debugger</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	bar(c * <span class="number">3</span>);</span><br><span class="line">&#125;</span><br><span class="line">foo( <span class="number">2</span> ); <span class="comment">// 1 2 4 12</span></span><br></pre></td></tr></table></figure>
<p>scope는 chrome devtools에서 확인할 수 있다. <code>debugger</code> 키워드를 이용해서 함수 내에서 실행을 중단 시킨 후 다음과 같이 scope 항목에서 확인이 가능하다. </p>
<img src="/2017/06/26/Book-Deep-Javascript-2-9/debugger_scope.png" title="Debugger and Scope">
<h5 id="d-Dynamic-Scope과의-차이"><a href="#d-Dynamic-Scope과의-차이" class="headerlink" title="d. Dynamic Scope과의 차이"></a>d. Dynamic Scope과의 차이</h5><p>Shell Script나 Perl은 dynamic scope 방식을 사용한다. 신기하게도 다음과 같이 같은 소스로 static과 dynamic scope를 둘다 테스트 해 볼 수 있다.</p>
<figure class="highlight plain"><figcaption><span>Static Scope vs Dynamic Scope</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ ksh -c &apos;function f1 &#123; typeset a=local; f2; echo $a; &#125;;</span><br><span class="line">  function f2 &#123; echo $a; a=changed; &#125;;</span><br><span class="line">  a=global; f1; echo $a&apos;</span><br><span class="line">global</span><br><span class="line">local</span><br><span class="line">changed</span><br><span class="line"></span><br><span class="line">$ bash --posix -c &apos;function f1 &#123; typeset a=local; f2; echo $a; &#125;;</span><br><span class="line">  function f2 &#123; echo $a; a=changed; &#125;;</span><br><span class="line">  a=global; f1; echo $a&apos;</span><br><span class="line">local</span><br><span class="line">changed</span><br><span class="line">global</span><br></pre></td></tr></table></figure>
<p>위의 소스에서 아래 bash로 실행한 코드가 dynamic scoping을 따른다. 요약하자면, static scoping을 기반으로 생각할 때는 <code>f1</code>과 <code>f2</code> 함수는 별개로 선언되어 있으므로, <code>f2</code>에서 참조하는 <code>a</code>는 당연히 global에 선언된 a이어야 한다. 하지만, 실행해 보면 f1의 a를 참조하고 있다는 것을 알 수 있다. </p>
<p> 결론적으로, “Dynamic scoping”은 변수를 탐색할 때, 실제 call이 되는 순서를 기준으로 탐색한다. <strong>즉, call stack을 기준으로 찾는다.</strong> </p>
<p><a href="https://stackoverflow.com/questions/1047454/what-is-lexical-scope" target="_blank" rel="noopener">Stack Overflow 답변</a>에서도 다음과 같은 C스타일의 코드를 통해서 Dynamic scope를 설명한다.</p>
<figure class="highlight c"><figcaption><span>Dynamic Scope</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fun</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d"</span>, x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dummy1</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">5</span>;</span><br><span class="line">    fun();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dummy2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">10</span>;</span><br><span class="line">    fun();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>dummy1()</code>과 <code>dummy2()</code> 내부에서 호출되는 <code>fun()</code>은 x를 가지고 있지 않으며, 외부 scope를 탐색하게 되는데 각각의 call stack을 따라 탐색을 하면 5와 10이 출력될 것이다. static scope라면 <code>fun()</code>에서 x를 찾을 수 없으므로 위의 문법은 static scope를 사용하는 C언어에서 틀린 문법이다.       </p>
<h5 id="e-결론"><a href="#e-결론" class="headerlink" title="e. 결론"></a>e. 결론</h5><p>코드를 작성 할 때 그 것의 이미 scope가 정해진다. 이 시점을 author-time이라 한다. 실제적으로는, 컴파일러의 lexing 단계, 즉 lex-time에서 scope가 정해진다. 이러한 이유로 이벤트 핸들러를 <code>for</code> 문 내에서 설정할 때, <code>i</code>를 사용할 경우, 각각 다른 scope와 값을 가진 i가 아닌, 글로벌 변수 i 하나만을 참조하는 것이다.  반대로, dynamic scope의 경우에는 call stack에 따라 바뀌므로 run-time에 결정된다. </p>
<p>단, scope와 scope chain 정보가 어디에 있으며([[scope]], variableObject, excution context가 뭔지..), 언제 생성되어 그 곳에  어떻게 메모리에 구성되는지 좀더 조사 해야 함.</p>
<h3 id="2-2-2-클로저의-실제-활용의-예"><a href="#2-2-2-클로저의-실제-활용의-예" class="headerlink" title="2.2.2. 클로저의 실제 활용의 예"></a>2.2.2. 클로저의 실제 활용의 예</h3><h4 id="클로저를-만드는-방법-1-내부-함수를-리턴하여-사용-한다"><a href="#클로저를-만드는-방법-1-내부-함수를-리턴하여-사용-한다" class="headerlink" title="클로저를 만드는 방법 1 - 내부 함수를 리턴하여 사용 한다."></a>클로저를 만드는 방법 1 - 내부 함수를 리턴하여 사용 한다.</h4><figure class="highlight javascript"><figcaption><span>static, local 변수를 가진 카운터</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> counterFactory = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> staticCount = <span class="number">0</span>; </span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> localCount = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            inc : <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> &#123;</span><br><span class="line">                    <span class="keyword">static</span>: ++staticCount,</span><br><span class="line">                    local: ++localCount</span><br><span class="line">                &#125;        </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;(); </span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> counterA = counterFactory();</span><br><span class="line"><span class="built_in">console</span>.log(counterA.inc()); <span class="comment">// Object &#123;static: 1, local: 1&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(counterA.inc()); <span class="comment">// Object &#123;static: 2, local: 2&#125;</span></span><br><span class="line"><span class="keyword">var</span> counterB = counterFactory();</span><br><span class="line"><span class="built_in">console</span>.log(counterB.inc()); <span class="comment">// Object &#123;static: 3, local: 1&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(counterB.inc()); <span class="comment">// Object &#123;static: 4, local: 2&#125;</span></span><br></pre></td></tr></table></figure>
<p>이 때, <strong>IIFE(Immediate Invoke Function Expression)</strong> 패턴을 사용하게 되는데, IIFE 내부에 함수를 구현하여 리턴한다. IIFE를 사용하는 이유는 클로저를 생성하기 위해서이고 (이 경우에는 staticCount를 유지하고 참조하기 위해서),  실제 동작하는 루틴은 리턴하는 함수 안에 안에 들어 있다.</p>
<h4 id="클로저를-만드는-방법-2-내부-함수를-콜백으로-등록하여-사용한다"><a href="#클로저를-만드는-방법-2-내부-함수를-콜백으로-등록하여-사용한다" class="headerlink" title="클로저를 만드는 방법 2 - 내부 함수를 콜백으로 등록하여 사용한다."></a>클로저를 만드는 방법 2 - 내부 함수를 콜백으로 등록하여 사용한다.</h4><figure class="highlight javascript"><figcaption><span>setTimeout event handler 등록</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> interval = <span class="literal">false</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">handler</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(++count);</span><br><span class="line">        <span class="keyword">if</span>(count &gt;= <span class="number">10</span>) &#123;</span><br><span class="line">            clearInterval(interval);</span><br><span class="line">            count = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    interval = setInterval(handler, <span class="number">1000</span>);</span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure>
<h3 id="2-2-3-클로저의-단점"><a href="#2-2-3-클로저의-단점" class="headerlink" title="2.2.3. 클로저의 단점"></a>2.2.3. 클로저의 단점</h3><p>클로저는 다음과 같은 단점이 있으나, 꼭 필요한 경우에는 사용하는 것이 좋다.</p>
<ol>
<li>클로저는 메모리를 소모한다.</li>
<li>과하게 사용하면 변수의 탐색 시간으로 인해 성능에 영향을 준다.</li>
</ol>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://soopdop.github.io/2017/06/26/Book-Deep-Javascript-2-9/" data-id="cjt3zcah0004w2sn2wgh8m90y" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="http://soopdop.github.io/2017/06/26/Book-Deep-Javascript-2-9/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="http://soopdop.github.io/2017/06/26/Book-Deep-Javascript-2-9/">Comments</a>
    

        </footer>
    </div>
    
</article>



    <article id="post-Book-Deep-Javascript-1-9" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/06/26/Book-Deep-Javascript-1-9/">[Book Summary] 속깊은 Javascript 1/9</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/06/26/Book-Deep-Javascript-1-9/">
            <time datetime="2017-06-26T05:32:05.000Z" itemprop="datePublished">2017-06-26</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/programming/">programming</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/javascript-Book-Summary/">javascript, Book Summary</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <img src="/2017/06/26/Book-Deep-Javascript-1-9/cover.jpg"> 
<h1 id="Chapter-1-웹과-자바-스크립트"><a href="#Chapter-1-웹과-자바-스크립트" class="headerlink" title="Chapter 1. 웹과 자바 스크립트"></a>Chapter 1. 웹과 자바 스크립트</h1><p>이제부터 구매하고 읽은 책에 대해서 정리를 해보려 한다. 앞으로도 보는 책은 짧게나마 요약할 예정이다. 내가 읽은 책을 요약하는 이유는 읽기 시작한 책의 “완독”을 위해서 이기도 하고, 독서의 효과를 높기이 위해서 이기도 하다. 책은 다른 사람의 언어로 씌여진 것이기 때문에 읽고 이해 했다 하더라도, 나의 언어로 바꾸어 재정리 하지 않으면 독서의 효과가 매우 떨어진다. 당연히 시작은 어려울 수 있다. 익숙해 져야 한다. 화이팅. </p>
<h2 id="1-1-자바스크립트의-어제와-오늘"><a href="#1-1-자바스크립트의-어제와-오늘" class="headerlink" title="1.1. 자바스크립트의 어제와 오늘"></a>1.1. 자바스크립트의 어제와 오늘</h2><p><code>alert</code> 창을 띄워 가며 디버깅 하던 시절이 있었다. 문법에러를 잡아 주지 않았기에 디버깅도 어려웠다. 지금은 다양한 디버깅 툴과 IDE 등의 등장으로 개발 환경이 확연히 달라졌다.</p>
<h3 id="“자바스크립트와-자바와의-관계는-햄과-햄버거의-관계이다-”"><a href="#“자바스크립트와-자바와의-관계는-햄과-햄버거의-관계이다-”" class="headerlink" title="“자바스크립트와 자바와의 관계는 햄과 햄버거의 관계이다.”"></a>“자바스크립트와 자바와의 관계는 햄과 햄버거의 관계이다.”</h3><p>그럴듯한 비유이다. 둘의 이름은 공통된 부분이 있지만, 그닥 관계있는 음식은 아니다. 자바와 자바스크립트는 무관하다고 하다고 말할 수 있을 정도로 전혀 관련이 없다. 역사적으로는 Netscape가 개발한 Livescript를 Sun Microsystems가 협업하면서 전략적으로 이름을 Javascript로 바꾼 것이다. </p>
<h2 id="1-2-웹-개발-방법론의-변화"><a href="#1-2-웹-개발-방법론의-변화" class="headerlink" title="1.2. 웹 개발 방법론의 변화"></a>1.2. 웹 개발 방법론의 변화</h2><h3 id="2000년-이전의-웹"><a href="#2000년-이전의-웹" class="headerlink" title="2000년 이전의 웹"></a>2000년 이전의 웹</h3><ul>
<li>HTML 파일로 제공하는 텍스트 정보가 주를 이룬다.</li>
<li>대부분 정적인 정보를 제공하는 웹페이지가 주를 이루었다.</li>
<li>포털이나 이메일 처럼 동적인 페이지를 생성하는 서버는 Perl과 CGI(Common Gateway Interface)를 구현하여 동적인 데이터를 제공.</li>
</ul>
<h3 id="2000년-이후의-웹"><a href="#2000년-이후의-웹" class="headerlink" title="2000년 이후의 웹"></a>2000년 이후의 웹</h3><ul>
<li>다양한 웹 언어가 활성화 되기 시작한다. (ASP, JSP, PHP)</li>
<li>HTML(클라이언트측 코드)과 PHP(서버측 코드)와 섞어서 코딩했다.<ul>
<li>서버와 클라이언트 코드가 실행되는 시점이 헷갈려 소스를 읽는데 어려움이 있었다.</li>
<li>본인이 개발한 소스도 다시 보면 어려웠다.</li>
</ul>
</li>
</ul>
<h3 id="AJAX의-등장"><a href="#AJAX의-등장" class="headerlink" title="AJAX의 등장"></a>AJAX의 등장</h3><ul>
<li>구글이 2005년에 공개한 구글맵에서 AJAX(Asynchronous Javascript And XML)를 이용함.</li>
<li>화면의 리플레시 없이도 서버로부터 받은 정보를 표시할 수 있음.</li>
<li>DHTML도 활발하게 이용되기 시작했다.</li>
<li>AJAX를 위한 함수 이름은 XMLHttpRequest()로, HTML을 XML규격에 맞추기 위한 표준화 작업도 진행 됐었다.</li>
<li>AJAX를 통해서 html 페이지의 일부를 받아서 직접 보여줌.</li>
</ul>
<h3 id="JSON-규격의-사용"><a href="#JSON-규격의-사용" class="headerlink" title="JSON 규격의 사용"></a>JSON 규격의 사용</h3><ul>
<li>AJAX를 통해서 웹페이지의 일부가 아닌 JSON 규격의 텍스트를 받는 방식으로 변경됨. </li>
<li>웹서비스라고 불리는 API들이 등장하기 시작하면서 JSON이 일반화 되시 시작함. (구글 API)</li>
<li>개발 프레임워크와 라이브러리들이 등장하기 시작함. (JQuery, Prototype)</li>
<li>HTML 5 표준화작업으로 넘어가기 시작.</li>
</ul>
<h3 id="Javascript와-CSS의-역할-변화"><a href="#Javascript와-CSS의-역할-변화" class="headerlink" title="Javascript와 CSS의 역할 변화"></a>Javascript와 CSS의 역할 변화</h3><ul>
<li>Javascript<ul>
<li>웹언어의 보조 수단. =&gt; 데이터 처리와 렌더링을 담당.</li>
</ul>
</li>
<li>CSS<ul>
<li>폰트, 테두리 등을 바꾸기 위해 사용 =&gt; 포지셔닝, 애니메이션, 3D, 마우스 오버 등 다양한 효과가 추가 됨.</li>
</ul>
</li>
</ul>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://soopdop.github.io/2017/06/26/Book-Deep-Javascript-1-9/" data-id="cjt3zcagb004l2sn2pj8oxc6j" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="http://soopdop.github.io/2017/06/26/Book-Deep-Javascript-1-9/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="http://soopdop.github.io/2017/06/26/Book-Deep-Javascript-1-9/">Comments</a>
    

        </footer>
    </div>
    
</article>



    <nav id="page-nav">
        <a class="extend prev" rel="prev" href="/page/25/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/24/">24</a><a class="page-number" href="/page/25/">25</a><span class="page-number current">26</span><a class="page-number" href="/page/27/">27</a><a class="page-number" href="/page/28/">28</a><span class="space">&hellip;</span><a class="page-number" href="/page/33/">33</a><a class="extend next" rel="next" href="/page/27/">Next &raquo;</a>
    </nav>
</section>
            
                
<aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">recent</h3>
        <div class="widget">
            <ul id="recent-post" class="no-thumbnail">
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/English/">English</a></p>
                            <p class="item-title"><a href="/2019/03/08/Summary-김과장-비즈니스-영어로-날다-2019-03-07/" class="title">[Summary] 김과장 비즈니스 영어로 날다 2019-03-07</a></p>
                            <p class="item-date"><time datetime="2019-03-08T12:41:31.000Z" itemprop="datePublished">2019-03-08</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/English/">English</a></p>
                            <p class="item-title"><a href="/2019/03/08/Summary-김과장-비즈니스-영어로-날다-2019-03-06/" class="title">[Summary] 김과장 비즈니스 영어로 날다 2019-03-06</a></p>
                            <p class="item-date"><time datetime="2019-03-08T12:16:51.000Z" itemprop="datePublished">2019-03-08</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/English/">English</a></p>
                            <p class="item-title"><a href="/2019/03/07/Summary-김과장-비즈니스-영어로-날다-2019-03-05/" class="title">[Summary] 김과장 비즈니스 영어로 날다 2019-03-05</a></p>
                            <p class="item-date"><time datetime="2019-03-07T13:51:41.000Z" itemprop="datePublished">2019-03-07</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/English/">English</a></p>
                            <p class="item-title"><a href="/2019/03/07/Summary-김과장-비즈니스-영어로-날다-2019-03-04/" class="title">[Summary] 김과장 비즈니스 영어로 날다 2019-03-04</a></p>
                            <p class="item-date"><time datetime="2019-03-07T13:34:19.000Z" itemprop="datePublished">2019-03-07</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/English/">English</a></p>
                            <p class="item-title"><a href="/2019/03/07/Summary-김과장-비즈니스-영어로-날다-2019-03-02/" class="title">[Summary] 김과장 비즈니스 영어로 날다 2019-03-02</a></p>
                            <p class="item-date"><time datetime="2019-03-07T13:21:10.000Z" itemprop="datePublished">2019-03-07</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">categories</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/English/">English</a><span class="category-list-count">312</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/programming/">programming</a><span class="category-list-count">11</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">archives</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a><span class="archive-list-count">19</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a><span class="archive-list-count">17</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a><span class="archive-list-count">21</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a><span class="archive-list-count">24</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a><span class="archive-list-count">22</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a><span class="archive-list-count">22</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a><span class="archive-list-count">25</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a><span class="archive-list-count">17</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a><span class="archive-list-count">25</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a><span class="archive-list-count">19</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a><span class="archive-list-count">17</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a><span class="archive-list-count">18</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a><span class="archive-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">tags</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/400/">400</a><span class="tag-list-count">19</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/500E/">500E</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/500W/">500W</a><span class="tag-list-count">18</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/600W/">600W</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/English/">English</a><span class="tag-list-count">313</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Grammar/">Grammar</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Reading/">Reading</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/etc/">etc</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grammar/">grammar</a><span class="tag-list-count">18</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript-Book-Summary/">javascript, Book Summary</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript-jsfiddle/">javascript, jsfiddle</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/osd/">osd</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/reading/">reading</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/writing/">writing</a><span class="tag-list-count">8</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">tag cloud</h3>
        <div class="widget tagcloud">
            <a href="/tags/400/" style="font-size: 18.89px;">400</a> <a href="/tags/500E/" style="font-size: 13.33px;">500E</a> <a href="/tags/500W/" style="font-size: 17.78px;">500W</a> <a href="/tags/600W/" style="font-size: 14.44px;">600W</a> <a href="/tags/English/" style="font-size: 20px;">English</a> <a href="/tags/Grammar/" style="font-size: 12.22px;">Grammar</a> <a href="/tags/Reading/" style="font-size: 11.11px;">Reading</a> <a href="/tags/etc/" style="font-size: 16.67px;">etc</a> <a href="/tags/grammar/" style="font-size: 17.78px;">grammar</a> <a href="/tags/java/" style="font-size: 10px;">java</a> <a href="/tags/javascript-Book-Summary/" style="font-size: 15.56px;">javascript, Book Summary</a> <a href="/tags/javascript-jsfiddle/" style="font-size: 10px;">javascript, jsfiddle</a> <a href="/tags/osd/" style="font-size: 14.44px;">osd</a> <a href="/tags/reading/" style="font-size: 16.67px;">reading</a> <a href="/tags/writing/" style="font-size: 14.44px;">writing</a>
        </div>
    </div>

    
        
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">links</h3>
        <div class="widget">
            <ul>
                
            </ul>
        </div>
    </div>


    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>

            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2019 soopdop<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>
        </div>
    </div>
</footer>
        
    
    <script>
    var disqus_config = function () {
        
        this.page.identifier = 'undefined';
    };
    (function() { 
        var d = document, s = d.createElement('script');  
        s.src = '//' + 'soopdop' + '.disqus.com/count.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>




    
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>